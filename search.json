[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Andmetuba",
    "section": "",
    "text": "Saateks\nSee e-raamat on mõeldud abistavaks materjaliks R-studio1 kasutamisel. Hetkel on e-raamat oma sisu poolest pidevas arengus2.\nOlen koondanud siia valiku vajaminevaid käske3 ning lisanud lühikese selgituse, miks ja millal neid käske vaja võib minna. Kõik näited ja soovitused olen kirja pannud oma kasutuskogemuse pinnalt ning viisil, kuidas ise oleksin soovinud R-i kasutamist õppida. Püüan kasutada pigem R-iga kaasatulevaid andmestikke, et saaksid samu asju järgi teha, kuid kasutan ka mitmeid avaandmestikke, et oleks selgemini näha, mis võivad olla esmased tõrked “päris” andmete kasutamisel.\nRaamat liigub sisu poolest lihtsamalt keerulisema teema suunas ning peaks sobima ka päris algajale R-i kasutajale, kellel on R-Studio arvutisse salvesatatud. Programmi saab alla laadida siit.\nMa ei plaani kirjutada peatükki, mis räägib R-i seadistamisest, projektide loomisest jms. Vajadusel tutvu aga raamatuga R for Data Science (2e).4\nPüüan anda võimalikult palju viiteid, et R-i käskude (või analüüsimeetodite) kohta rohkem lugeda. Kuna olen oma R-i kasutamise teadmised pigem “kokku googeldanud”, siis alati ma ei oska ehk oma teadmiste allikale viidata. Seepärast viitan pigem pakettide autoritele, et tunnustada neid, kes on R- i arendamisse panustanud ja teinud R-i selliseks nagu ta täna on5.\nPalun arvesta, et ma kasutan mitmeid IT-termineid üpris vabalt ning püüan edasi anda pigem tegevuse sisu6. Kuna ma ei ole tarvkaraarendaja ega informaatik (ega tööta ka IT valdkonnas), siis luban omale raamatus vabamat keelekasutust. Ka minu koodikirjutuse stiil ei pruugi olla selline, milline see klassikaliselt olema peaks, kuid ma püüan end selles parandada. Kui kirjutame koodi üksi ja (vähemalt alguses) ainult enda silmadele, siis ei tundu nii oluline, et stiil 100% “õige” oleks. Siiski võiks kood olla piisavalt selge, et ise ka aasta pärast aru saaks, mis toona kirja pandud sai.\nSotsioloogina7 püüan siiski olla täpne analüüsimeetodite nimedes. Siiski palun arvesta, et see e-raamat ei ole mõeldud asendamaks analüüsimeetodite õpikut, vaid pigem kaaslaseks R-studio kasutamisel. Võta seda e-raamatut kui minu isiklikku konspetki, mis avalikult kättesaadav on.\nR on programm ja samas ka võõrkeel. Nii nagu igat võõrkeelt, õpib ka R- i kõige paremini kui seda (regulaarselt) harjutada. Kuigi siit raamatust saab koodi otse kopeerida, püüa kood mõttega läbi kirjutada ja tee oma sõnadega käsk-ude juurde märkmeid.",
    "crumbs": [
      "Saateks"
    ]
  },
  {
    "objectID": "index.html#paketid",
    "href": "index.html#paketid",
    "title": "Andmetuba",
    "section": "Paketid",
    "text": "Paketid\nR-i baasversioon8 on võimas tööriist, kuid paljud paketid teevad R-i kasutamise veelgi mugavamaks ja võimsamaks.\nMinu lemmik pakett on tidyverse(Wickham 2023) ning käivitan selle esimese asjana iga tööprojekti alguses. tidyverse oma olemuselt on erinevate levinud pakettide kogum, mis laiendab oluliselt R-is toimetamisel kasutatavad sõnavara. Loe tidyverse paketi kohta rohkem siit.\n\nlibrary(tidyverse)\n\nSelle e-raamatu koostasin R-studios Quartot kasutades.\n\n\n\n\n\n\nMõnikord ei saa R paketi installeerimisega hakkama, sest sõltuvad paketid (mida me tavaliselt ei näegi) ei ole enam selles verisoonis, mida parasjagu vaja. Siis tuleb kasutada käsk install() paketist renv(Ushey and Wickham 2024) ning paketi nime järel tuleb kirjutada @versiooni_number.\n\n\n\n\n\n\n\n\n\nMõned R-i koodid olen raamatust välja kommenteerinud, sest soovin käsu kasutamist näidata aga mitte seda käivitada. Alates peatükist nr 2 selliseid väljakommenteeritud näidiskoode olen kasutanud mõnel üksikul korral.\n\n\n\n\n#renv::install(\"data.table@1.15.2\")",
    "crumbs": [
      "Saateks"
    ]
  },
  {
    "objectID": "index.html#sonavara",
    "href": "index.html#sonavara",
    "title": "Andmetuba",
    "section": "R- i sõnavara",
    "text": "R- i sõnavara\nR võimaldab teha andmetega mitmesuguseid tehteid. Tavapärane liitmine ja lahutamine toimubki vastavalt kas + või - märgiga. Jagamiseks on märk / ning korrutamiseks *. Selleks, et teha keerukamat lauset, on vaja tunda ka järgmisi märke.\n\n\n\nSümbol\nTegevus või tähendus\n\n\n\n\n&lt;-\nabil anname mingile objektile teatud väärtuse\n\n\n$\n“kõnetab” konkreetset tunnust andmestik-us (vaata ka tunnustega tutvumine )\n\n\n%&gt;% või |&gt;\nja siis või seejärel (tee järgmist asja). Selle kohta öeldakse ka torud või pipes. Klahvilühend ctrl+shift+M või command+shift+M. Mina olen harjunud kasutama torusid selliselt %&gt;%.\n\n\n%in%\nkas tunnus sisaldab väärtust\n\n\n#\nkommenteerib teksti käsust välja ehk # järgselt ei tekst osa koodist. Tee nii omale märkmeid koodi kohta.\n\n\n?\nkoos käsu nimega avab käsu dokumentatsiooni\n\n\n==\nvõrdne\n\n\n&lt;\nväiksem kui\n\n\n&gt;\nsuurem kui\n\n\n&lt;=\nväiksem või võrdne\n\n\n!\npöörab käsu tagurpidi\n\n\n!=\nei ole võrdne\n\n\n|\nvõi\n\n\n&\nja\n\n\n\nPeaaegu kõik levinud funktsioonid algavad R-is väikese tähega ning neile järgnevad sulud (). funktsioon on käsk, mis ütleb programmile, mida teha tuleb. Enamasti ütleb käsu nimi juba, mida ta tegema peab (näiteks käsk filter()), kuid R-ile tuleb sulgudes sees täpsustada, milliste andmetega antud käsku täita. R-is on väga oluline, kas kasutusel on suured või väikesed tähed, teatud sümbolite kasutamine R-ile ei meeldi ning kui R, millestki aru või hakkama ei saa, siis ta seda ka ütleb.\ntidyverse pakett laiendab R-i sõnavara olulisel määral. Baasversiooniga on võimalik ka palju ära teha, kuid mina eelistan kasutada pigem tidyverse lähenemist.\nNäide, kuidas sama asja saab kirjutada kahel erineval viisil. Esimene neist on nn baasversiooni lähenemine ja teine tidyverse oma. Mõlema koodijupi käivitamine annab sama tulemuse.\n\n#baasversioon\nstarwars[is.na(starwars$mass),]\n\n# A tibble: 28 × 14\n   name     height  mass hair_color skin_color eye_color birth_year sex   gender\n   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; \n 1 Wilhuff…    180    NA auburn, g… fair       blue              64 male  mascu…\n 2 Mon Mot…    150    NA auburn     fair       blue              48 fema… femin…\n 3 Arvel C…     NA    NA brown      fair       brown             NA male  mascu…\n 4 Finis V…    170    NA blond      fair       blue              91 male  mascu…\n 5 Rugor N…    206    NA none       green      orange            NA male  mascu…\n 6 Ric Olié    183    NA brown      fair       blue              NA male  mascu…\n 7 Watto       137    NA black      blue, grey yellow            NA male  mascu…\n 8 Quarsh …    183    NA black      dark       brown             62 male  mascu…\n 9 Shmi Sk…    163    NA black      fair       brown             72 fema… femin…\n10 Bib For…    180    NA none       pale       pink              NA male  mascu…\n# ℹ 18 more rows\n# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,\n#   vehicles &lt;list&gt;, starships &lt;list&gt;\n\n\n\n#tidyverse abil\nstarwars%&gt;%\n  filter(is.na(mass))\n\n# A tibble: 28 × 14\n   name     height  mass hair_color skin_color eye_color birth_year sex   gender\n   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; \n 1 Wilhuff…    180    NA auburn, g… fair       blue              64 male  mascu…\n 2 Mon Mot…    150    NA auburn     fair       blue              48 fema… femin…\n 3 Arvel C…     NA    NA brown      fair       brown             NA male  mascu…\n 4 Finis V…    170    NA blond      fair       blue              91 male  mascu…\n 5 Rugor N…    206    NA none       green      orange            NA male  mascu…\n 6 Ric Olié    183    NA brown      fair       blue              NA male  mascu…\n 7 Watto       137    NA black      blue, grey yellow            NA male  mascu…\n 8 Quarsh …    183    NA black      dark       brown             62 male  mascu…\n 9 Shmi Sk…    163    NA black      fair       brown             72 fema… femin…\n10 Bib For…    180    NA none       pale       pink              NA male  mascu…\n# ℹ 18 more rows\n# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,\n#   vehicles &lt;list&gt;, starships &lt;list&gt;\n\n\n\n\n\n\nUshey, Kevin, and Hadley Wickham. 2024. Renv: Project Environments. https://CRAN.R-project.org/package=renv.\n\n\nWickham, Hadley. 2023. Tidyverse: Easily Install and Load the Tidyverse. https://CRAN.R-project.org/package=tidyverse.",
    "crumbs": [
      "Saateks"
    ]
  },
  {
    "objectID": "index.html#footnotes",
    "href": "index.html#footnotes",
    "title": "Andmetuba",
    "section": "",
    "text": "Ütlen R-studio kohta ka lühidalt lihtsalt mugavuse tõttu R. Ühtalsi on R korraga nii programm kui ka programmeerimis keel.↩︎\nMiks avaldan pooliku töö? Olen ühes töögrupis, kus õpetan mitteinformaatikuid R-i kasutama. Töögrupis osalejatel võib poolikust e-raamatust kasu olla ning minul endal on sellisel viisil organiseeritud märkmetest abi kuhjaga.↩︎\nKasutan sõna käsk funktsioon sünonüümina. käsk on see, mis ütleb programmile, mida teha tuleb.↩︎\nNullist alustades vaata Workflow peatükke nr 2, 6 ja 8.↩︎\nKäivita käsk contributors(), et lugeda programmi loojatest ja arendajatest rohkem↩︎\nEnamasti ma ei tunnegi neid nn “õigeid” termineid.↩︎\nLõpetasin 2019. aastal Tartu Ülikooli sotsioloogia magistrikava↩︎\nBaasversioon-i alla mõtlen neid R-i käske, mille kasutamiseks ei ole ühtegi teist paketti kasutusele vaja võtta.↩︎",
    "crumbs": [
      "Saateks"
    ]
  },
  {
    "objectID": "01-andmestike-lugemine.html",
    "href": "01-andmestike-lugemine.html",
    "title": "1  Andmestiku laadimine ja tunnustega tutvumine",
    "section": "",
    "text": "1.1 R-iga kaasatulevad andmestikud\nPaljud paketid sisaldavad näidisandmestikke (datasets), mille abil on hea uusi oskusi harjutada.\nKäsuga data() (sulud seest tühjad) on võimalik näha, millised andmekogud on R-is saadaval, mis tulevad baasversioon-i või mõne muu paketiga kaasa. Käsu data() käivitamisel tekib töökeskkonda lisa tab nimega “R data sets”.\nKui on soov näha kõiki saadalolevaid andmestikke, käivita allolev käsk (ilma trellideta #).\n#data(package = .packages(all.available = TRUE))\nKui on soov mõnda R-i andmestikku kasutusele võtta, siis tuleb kirjutada data() käsu sisse andmestiku nimi. Näiteks tidyverse paketiga tuleb kaasa andmestik “starwars” ning võtame ta kasutusele.\nlibrary(tidyverse)\ndata(starwars)\nNüüd on Enviroment keskkonnas andmestik “starwars”, millel on 87 vaatlust (87 obs) ja 14 tunnust (14 variables).\nJärgmine peatükk räägib, kuidas saada andmestikust esmane ülevaade.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Andmestiku laadimine ja tunnustega tutvumine</span>"
    ]
  },
  {
    "objectID": "01-andmestike-lugemine.html#R-andmestikud",
    "href": "01-andmestike-lugemine.html#R-andmestikud",
    "title": "1  Andmestiku laadimine ja tunnustega tutvumine",
    "section": "",
    "text": "Environment keskkond asub vaikimisi R-studio paremal pool ülevas nurgas.\n\n\n\n\n\n\n\n\n\nBaasversiooni andmestikke on hea kasutada siis, kui on soov õppida mõnda uut analüüsimeetodit või andmete visualiseerimist, kuna need andmestikud on valdavalt puhastatud ja õppimiseks loodud.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Andmestiku laadimine ja tunnustega tutvumine</span>"
    ]
  },
  {
    "objectID": "01-andmestike-lugemine.html#levinud-andmestikud",
    "href": "01-andmestike-lugemine.html#levinud-andmestikud",
    "title": "1  Andmestiku laadimine ja tunnustega tutvumine",
    "section": "1.2 Enimlevinud failidest andmestike laadimine",
    "text": "1.2 Enimlevinud failidest andmestike laadimine\nEnviroment keskkonnas on nupp “Import Dataset”, mille abil on mugav andmestikke sisse lugeda. Selle kasutamisel näeb ka andmete importimiseks vajalikku R-i koodi, mida saab oma tööfaili scripti kopeerida. Kahjuks ei toimi “Import dataset” nupp .csv-failide puhul.\n\n.csv failid\nSisse lugemise käsk sõltub sellest, kas andmeid on failis eraldatud koma (,) või semikooloniga (;).\n\nKui andmeid eraldab ,, kasuta käsku read.csv()\nKui andmeid eraldab ;, kasuta käsku read.csv2()\n\n\n# andmed&lt;-read.csv(\"soidueksam.csv\", \n1#                 na.strings=c(\"\", \".\", \"-\"),\n2#                strip.white = TRUE,\n3#                 fileEncoding = \"utf-8\")\n\n\n1\n\nstrip.white=TRUE - eemaldab üleliigsed tühikud, mis mõnikord võivad csv failiga kaasa tulla\n\n2\n\nna.strings - seda läheb vaja olukorras, kus puuduv väärtus on esitatud mingi muu tähisega, näiteks (tühik) , . või -.\n\n3\n\nfileEncoding - mõnikord võib vaja olla andmete sisse lugemisel täpsustada, et fail on utf-8 kodeeringus.\n\n\n\n\n.csv faile on võimalik sisse lugeda ka paketiga readr(Wickham, Hester, and Bryan 2023) ning käsuga read_csv(). Käsu kasutamisel võivad errorid tulla siis, kui fail ei ole utf-8 kodeeringus. Siis tuleb täpsustada locale() käsuga kodeeringut.\n\n#read_csv(\"failinimi.csv\", locale(encoding = \"iso-8859-4\"))\n\n\n\n.xlsx failid\nExcelist andmete importimiseks läheb vaja paketti readxl(Wickham and Bryan 2023) ja käsku read_excel().\n\n\n\n\n\n\nAndmeid R-i importimise ajaks ei pea sulgema Exceli faili.\n\n\n\n\nlibrary(readxl)\n\n\n# read_excel(\"failinimi.xlsx\",\n1#               sheet=\"leht1\",\n#               range=\"A3:D16\")\n\n\n1\n\nsheet - saab täpsustada, milliselt lehelt andmeid võtta\n\n\n\n\nLisada saab veel täpsustusi:\n\ntrim_ws=TRUE - eemaldab nn whitespace ehk tühikud eest ja lõpust1.\ncol_types= saab täpsustada [tunnuste tüüpe](#tunnuste-tyybid].\n\n\n\n.sav failid\nSPSS failide (.sav) importimiseks on kaks võimalust ning paketi valik sõltub sellest, mida parasjagu (rohkem) vaja on.\nPakett haven (Wickham, Miller, and Smith 2023) annab käsu read_sav(). Pakett kasutab andmete sisse lugemisel tunnuste silte (label) ja tunnuse väärtus-eid kuvab 1, 2, 3 jne.\nPakett foreign (R Core Team 2023) annab käsu read.spss() ning täpsustuseks tuleb öelda to.data.frame=T.\n\n\n\n\n\n\nArvestama peab, et see pakett loeb aga numbrilised tunnused ka faktor-iks2. Loe tunnuste tüüpide kohta siit ning faktor-ite kohta siit.\n\n\n\n\n#library(haven)\n#andmed&lt;-read_sav(\"failinimi.sav\")\n\n\n#library(foreign)\n#andmed&lt;-read.spss(\"failinimi.sav\",\n#                   to.data.frame=T)\n\nKuigi koodi on lihtsam kirjutada, kui tunnuse nimi on code ja mitte label, on siiski mõnikord vaja panna tunnuste nimeks hoopis tunnuse silt (ehk label). Selleks on abiks pakett sjlabelled (Lüdecke 2022) ja käsk label_to_colnames()\n\n#library(sjlabelled)\n#label_to_colnames(andmed)",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Andmestiku laadimine ja tunnustega tutvumine</span>"
    ]
  },
  {
    "objectID": "01-andmestike-lugemine.html#online-andmestikud",
    "href": "01-andmestike-lugemine.html#online-andmestikud",
    "title": "1  Andmestiku laadimine ja tunnustega tutvumine",
    "section": "1.3 Online andmestikud",
    "text": "1.3 Online andmestikud\n\n\n\n\n\n\nPeatükk on täiendamisel.\n\n\n\n\nEurostat\nPakett eurostat. Kui on teada täpne tabeli nimi, saab kasutada käsku get_eurostat()\nPaketi kasutumise kirjeldus saab vaadata siin.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Andmestiku laadimine ja tunnustega tutvumine</span>"
    ]
  },
  {
    "objectID": "01-andmestike-lugemine.html#salvestamine",
    "href": "01-andmestike-lugemine.html#salvestamine",
    "title": "1  Andmestiku laadimine ja tunnustega tutvumine",
    "section": "1.4 Andmete R-ist (välja) salvestamine",
    "text": "1.4 Andmete R-ist (välja) salvestamine\nSalvestamise käsk sõltub sellest, millist failitüüpi salvestada soovid.\n\nwrite_csv()- salvestab andmeobjetki ja erldab need komaga\nwrite.xlsx() - salvestab exceli faili. Vajab läheb paketti openxlsx (Schauberger and Walker 2023).\n\nMõlemad käsud töötavad ühte moodi. Sulgude sees tuleb esmalt täpsustada, mis andmeobjekt tuleb salvestada ja seejärel kirjutada talle nimi.\n\nwrite_csv(starwars, \"starwars.csv\")\n\n\n#library(openxlsx)\n#write.xlsx(andmed, file=\"failinimi.xlsx\")\n\n\n\n\n\n\n\nHarjuta kirjutama failinimesid nii, et ei pane sama nime failile, mis tal oli enne R-i sisse lugemist. R kirjutab projektikaustas sama nimega faili ilma hoiatamata üle.\n\n\n\nEnamasti salvestab R faili projekti kausta.\n\n\n\n\nLüdecke, Daniel. 2022. Sjlabelled: Labelled Data Utility Functions (Version 1.2.0). https://doi.org/10.5281/zenodo.1249215.\n\n\nR Core Team. 2023. Foreign: Read Data Stored by ’Minitab’, ’s’, ’SAS’, ’SPSS’, ’Stata’, ’Systat’, ’Weka’, ’dBase’, ... https://CRAN.R-project.org/package=foreign.\n\n\nSchauberger, Philipp, and Alexander Walker. 2023. Openxlsx: Read, Write and Edit Xlsx Files. https://CRAN.R-project.org/package=openxlsx.\n\n\nWickham, Hadley, and Jennifer Bryan. 2023. Readxl: Read Excel Files. https://CRAN.R-project.org/package=readxl.\n\n\nWickham, Hadley, Jim Hester, and Jennifer Bryan. 2023. Readr: Read Rectangular Text Data. https://CRAN.R-project.org/package=readr.\n\n\nWickham, Hadley, Evan Miller, and Danny Smith. 2023. Haven: Import and Export ’SPSS’, ’Stata’ and ’SAS’ Files. https://CRAN.R-project.org/package=haven.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Andmestiku laadimine ja tunnustega tutvumine</span>"
    ]
  },
  {
    "objectID": "01-andmestike-lugemine.html#footnotes",
    "href": "01-andmestike-lugemine.html#footnotes",
    "title": "1  Andmestiku laadimine ja tunnustega tutvumine",
    "section": "",
    "text": "Kui keegi on Excelis sisestanud lahtrisse ainult tühiku, siis selle eemaldamisel ei ole see andmeväli R-is enam kui puuduv väärtus (NA) ega ka tühi lahter. Selle korrigeerimiseks olen muutnud Exceli faili ennast enne R-i lugemist.↩︎\nKasutan raamatus läbisegi factor ja faktor ning mõlemad tähistavad ühte ja sama asja, et tunnusel on väärtusteks kategooriad.↩︎",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Andmestiku laadimine ja tunnustega tutvumine</span>"
    ]
  },
  {
    "objectID": "02-andmestiku-ylevaade.html",
    "href": "02-andmestiku-ylevaade.html",
    "title": "2  Andmestikust esmase ülevaate saamine",
    "section": "",
    "text": "2.1 Andmestiku suurusest ülevaate saamine\nEsmase ülevaate andmestiku suurusest (st ridade ja tulpade arvust) saab ka enviroment aknast, kuid vaja võib minna ka järgmisi käske.\ndim(starwars)\n\n[1] 87 14\nnrow(starwars)\n\n[1] 87\nstarwars_tegelased&lt;-nrow(starwars)\n130/starwars_tegelased\n\n\n1\n\nleiame kui suure osakaalu moodustab number 30 starwarsi tegelastest\n\n\n\n\n[1] 0.3448276",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Andmestikust esmase ülevaate saamine</span>"
    ]
  },
  {
    "objectID": "02-andmestiku-ylevaade.html#andmestiku-suurus",
    "href": "02-andmestiku-ylevaade.html#andmestiku-suurus",
    "title": "2  Andmestikust esmase ülevaate saamine",
    "section": "",
    "text": "dim()- näitab ära andmestiku read ja tulbad.\nnrow() ja ncol() - näitavad vastavalt ainult ridade või tulpade arvu.\n\n\n\n\n\n\n\n\n\nnrow() käsu abil on hea salvestada mõni väärtus values hulka ja selle väärtuse objekti kasutada mõnes tehtes\n\n\n\n\n\n\nValues Environment keskkonnas\n\n\n\n\n\n\n\n\n\nÄra ise nii pikke nimesid (starwars_tegelased) oma objektidele pane, sest koodi kirjutades on neid väga tüütu iga kord välja kirjutada. Nimeta objekte nii, et sa ise neid pärast ära tunned. Nimedes on numbrid, alakriips _ ja punkt . lubatud, kuid nimi peab algama tähega.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Andmestikust esmase ülevaate saamine</span>"
    ]
  },
  {
    "objectID": "02-andmestiku-ylevaade.html#andmestiku-struktuur",
    "href": "02-andmestiku-ylevaade.html#andmestiku-struktuur",
    "title": "2  Andmestikust esmase ülevaate saamine",
    "section": "2.2 Andmestiku struktuurist ülevaate saamine",
    "text": "2.2 Andmestiku struktuurist ülevaate saamine\nKäsud str(), glimpse(), head()ja tail() näitavad andmestiku struktuurist nii tunnuste tüüpe kui ka ridade esimesi (v.a. tail()) väärtusi. Andmestiku struktuurist saab sarnase ülevaate ka Environment keskkonnast, kui klõpsta andmestiku nime ees olevale sinisele ikoonile.\n\n\n\nAndmestiku (ja teiste objektide) koosseisuga saab tutvuda otse Environment aknas\n\n\nKäsk glimpse() hoiab väheke rohkem ruumi kokku ning täiesti maitse asi, kas kasutada glimpse(), str() või environment keskkonda. Siiski soovitan alati andmestiku pea ja saba üle vaadata, et olla veendnuda, et tunnustel on nimed ning andmestiku lõpus ei ole mõnda üleolevat rida.\n\nglimpse(starwars)\n\nRows: 87\nColumns: 14\n$ name       &lt;chr&gt; \"Luke Skywalker\", \"C-3PO\", \"R2-D2\", \"Darth Vader\", \"Leia Or…\n$ height     &lt;int&gt; 172, 167, 96, 202, 150, 178, 165, 97, 183, 182, 188, 180, 2…\n$ mass       &lt;dbl&gt; 77.0, 75.0, 32.0, 136.0, 49.0, 120.0, 75.0, 32.0, 84.0, 77.…\n$ hair_color &lt;chr&gt; \"blond\", NA, NA, \"none\", \"brown\", \"brown, grey\", \"brown\", N…\n$ skin_color &lt;chr&gt; \"fair\", \"gold\", \"white, blue\", \"white\", \"light\", \"light\", \"…\n$ eye_color  &lt;chr&gt; \"blue\", \"yellow\", \"red\", \"yellow\", \"brown\", \"blue\", \"blue\",…\n$ birth_year &lt;dbl&gt; 19.0, 112.0, 33.0, 41.9, 19.0, 52.0, 47.0, NA, 24.0, 57.0, …\n$ sex        &lt;chr&gt; \"male\", \"none\", \"none\", \"male\", \"female\", \"male\", \"female\",…\n$ gender     &lt;chr&gt; \"masculine\", \"masculine\", \"masculine\", \"masculine\", \"femini…\n$ homeworld  &lt;chr&gt; \"Tatooine\", \"Tatooine\", \"Naboo\", \"Tatooine\", \"Alderaan\", \"T…\n$ species    &lt;chr&gt; \"Human\", \"Droid\", \"Droid\", \"Human\", \"Human\", \"Human\", \"Huma…\n$ films      &lt;list&gt; &lt;\"A New Hope\", \"The Empire Strikes Back\", \"Return of the J…\n$ vehicles   &lt;list&gt; &lt;\"Snowspeeder\", \"Imperial Speeder Bike\"&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, \"Imp…\n$ starships  &lt;list&gt; &lt;\"X-wing\", \"Imperial shuttle\"&gt;, &lt;&gt;, &lt;&gt;, \"TIE Advanced x1\",…\n\n\n\nhead() - kuvab vaikimisi esimesed kuus rida. Komaga saab täpsutada kui palju on soov näha.\ntail() - kuvab andmestiku viimast kuute rida.\n\n\nhead(starwars, 3)\n\n# A tibble: 3 × 14\n  name      height  mass hair_color skin_color eye_color birth_year sex   gender\n  &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; \n1 Luke Sky…    172    77 blond      fair       blue              19 male  mascu…\n2 C-3PO        167    75 &lt;NA&gt;       gold       yellow           112 none  mascu…\n3 R2-D2         96    32 &lt;NA&gt;       white, bl… red               33 none  mascu…\n# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,\n#   vehicles &lt;list&gt;, starships &lt;list&gt;\n\n\nsummary() - käsk toimib nii andmestike kui tunnustega. Andmestikest kokkuvõtte saamine selle käsuga on silmale mugavav lugeda siis, kui andmestikus on vähe tunnuseid.\n\ndata(Orange)\nsummary(Orange)\n\n Tree       age         circumference  \n 3:7   Min.   : 118.0   Min.   : 30.0  \n 1:7   1st Qu.: 484.0   1st Qu.: 65.5  \n 5:7   Median :1004.0   Median :115.0  \n 2:7   Mean   : 922.1   Mean   :115.9  \n 4:7   3rd Qu.:1372.0   3rd Qu.:161.5  \n       Max.   :1582.0   Max.   :214.0  \n\n\nSoovi korral võib kasutada ka paketti DataExplorer (Cui 2024) ja käsku introduce().\n\nlibrary(DataExplorer)\nintroduce(Orange)\n\n  rows columns discrete_columns continuous_columns all_missing_columns\n1   35       3                1                  2                   0\n  total_missing_values complete_rows total_observations memory_usage\n1                    0            35                105         3040\n\n\n\n\n\n\n\n\nandmestik starwars sisaldab paari tunnust, mis sisaldab list tüüpi tunnuseid ja seepärast ei pruugi õnnestuda introduce() käsk starwars andmestikuga.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Andmestikust esmase ülevaate saamine</span>"
    ]
  },
  {
    "objectID": "02-andmestiku-ylevaade.html#tunnustega-tutvumine",
    "href": "02-andmestiku-ylevaade.html#tunnustega-tutvumine",
    "title": "2  Andmestikust esmase ülevaate saamine",
    "section": "2.3 Tunnustega tutvumine",
    "text": "2.3 Tunnustega tutvumine\nTunnustega tutvumise etapis võib tekkida tahtmine tunnuseid muuta, et neid oleks mugavamvõi üldse võimalik kasutada. Oma olemuselt on see tehniline töö tunnustega, millele kulub andmeanalüüsis kõige rohkem aega. Seepärast tunnuste muutmiseks eraldi pikem ja põhjalik järgmine peatükk.\nSelleks, et kõnetada konkreetset tunnust on vaja kasutada andmestiku nime järel $ märki ja kirjutada tunnuse nimi.\n\n#andmestik$tunnuse_nimi\n\nTunnustega tutvumisel vaatame nii tunnuse nime, tüüpi kui ka sisu.\n\nTunnuste nimed\nNäeb ka enviroment aknast, kuid vaja võib minna käsku names().\n\nnames(starwars)\n\n [1] \"name\"       \"height\"     \"mass\"       \"hair_color\" \"skin_color\"\n [6] \"eye_color\"  \"birth_year\" \"sex\"        \"gender\"     \"homeworld\" \n[11] \"species\"    \"films\"      \"vehicles\"   \"starships\" \n\n\n\n\nTunnuste tüübid\n\n\n\n\n\n\nLugemissoovitus\n\n\n\nRootalu, K. (2014). Tunnused ja nende tüübid. K. Rootalu, V. Kalmus, A. Masso, ja T. Vihalemm (toim), Sotsiaalse analüüsi meetodite ja metodoloogia õpibaas. https://samm.ut.ee/tunnused-ja-nende-tyybid/\n\n\nR-is on andmetüübid jaotatud järgmiselt:\n\ncharacter, &lt;chr&gt; - teksti sisaldavad tunnused, nende kohta öeldaks ka string.\ninteger, &lt;int&gt; - täisarvud\nnumeric või double, &lt;dbl&gt; - järjestikkused arvud\nlogical, &lt;lgl&gt; - ehk TRUE/FALSE või T/F\nfactor, &lt;fct&gt; - kategooria (võib inimsilmale välja näha kui number või kui tekst)\nDate - kuupäev\n\nMuud objektid võivad olla\n\ndata.frame- nn klassikaline andmestik, kus on tulbad ja read.\n\nTunnuse tüübi teada saamiseks läheb vaja käsku class(). Vaata ka peatükki [tunnuste tüübi muutmine].\n\nclass(starwars)\n\n[1] \"tbl_df\"     \"tbl\"        \"data.frame\"\n\n\nKasutame sama asja tunnuse vaatamiseks.\n\nclass(starwars$name)\n\n[1] \"character\"\n\n\n\nNumbrid ja arvud\nÜtlen kõigi kohta läbivalt numbriline, kuigi R teeb vahet, kas tegemist on diskreetsete arvudega (integer) või järjestikkustega (double, numeric).\n\nclass(starwars$height)\n\n[1] \"integer\"\n\n\n\nclass(starwars$mass)\n\n[1] \"numeric\"\n\n\n\n\nTekst ja kategooriad\nTekst võib olla lihtsalt tavaline tekst (character) kui ka mõnda kategooriat tähistav tekst. Kategooriad on R-is faktorid (factor).\nKategoriaalsed tunnused jagunevad omakorda järjestatavaks (ordinal), nominaalseteks ja binaarseteks. Need tunnused oma tüübilt on ikka factor. Binaarne tunnus võib olla teinekord ka sama, mis on logical tunnus.\n\nstarwars$binaarne&lt;-is.na(starwars$hair_color)\nclass(starwars$binaarne)\n\n[1] \"logical\"\n\n\nVaata, kuidas käib tunnuste kategooriate muutmine paketiga forcats või loe paketi kohta rohkem siit.\n\n\n\nMis on vector?\nKõige lihtsam on mõelda vector-ist kui mingist loendist.\nLoendil on teatud arv ühikuid alates ühest kuni piiramatu arv. Näideks nädalapäevade loend on seitse ühikut pikk. Selle loendi ühikutel on oma kindel järjekord, sest esmaspäevale järgneb alati teisipäev.\nLoendis võivad olla ka lihtsalt arvud. Need sõnad või arvud ongi loendi ühikud. Ühikud võivad olla kindlas järjekorras, kuid ei pea olema. Kõik ühikud võivad olla üksteisest erinevad, kuid nad ei pea seda olema. Mõni ühik võib loendis ka tühi, aga ta kuulub ikkagi selle loendi hulka.\nNäiteks klassis on 10 õpilast ja nende nimed on õpetajal kõik ühele real üksteise kõrvale kirja pandud. Kuna mõnel lapsel on kaks eesnime, on õpetaja laste nimed eraldanud komaga (,). See on nimede loend. Klassis on kaks poissi, kelle nimeks on Ants. Lisaks on üks nimelahter tühi, sest õpetaja ei tea veel, mis on uue õpilase nimi, aga ta on jätnud paberil tema nime jaoks ruumi.\nKüsime õpetajalt:\n\nMitu last on sinu klassis? Vastus: 10 last.\nMitu erinevat nime on sinu klassi lastel? Vastus: “ma ei tea”. Õpetaja tahab oma vastuses olla ülitäpne, kuid ta ei selgita miks ta ei tea. Õpetaja ei oska anda õiget vastust, sest ühe lapse nimi on tal puudu ja uue õpilase nimi võib juhtumisi ka olla Ants.\nMitu erinevat nime on sinu klassi lastel, kui loendad ainult neid, kelle nimed sul teada on? Vastus: 8.\nMis on kõige sagedasem nimi sinu klassis (kui sa vaatad ainult neid nimesid, mis sul teada on)? Vastus: Ants.\n\nUmbes nii mõtleb R kui temaga suhelda. R-is on sellise klassinimede loendi objekti tüübiks vector, mis sisaldab character tüüpi andmeid. vector-it tähistab R-is c(), mille ühikud on omavahel eraldatud komaga(,). Kui vectori ühikuteks on sõnad, on nad kirjutatud jutumärkide sisse.\nTeen õpilaste arvu vektori, mis sisaldab numbreid.\n\nopilaste_arvu_vektor&lt;-c(1:10)\n\n\nopilaste_arvu_vektor\n\n [1]  1  2  3  4  5  6  7  8  9 10\n\n\nTeen õpilaste nimede vektori, mis sisaldab sõnu.\n\nopilaste_nimede_vektor&lt;-c(\"Tiina\", \"Mai\", \"Ants\", \"Kati\", \"Ants\", NA, \"Kalle\", \"Tiina Mai\", \"Mai Tiina\", \"Paul\")\n\n\nopilaste_nimede_vektor\n\n [1] \"Tiina\"     \"Mai\"       \"Ants\"      \"Kati\"      \"Ants\"      NA         \n [7] \"Kalle\"     \"Tiina Mai\" \"Mai Tiina\" \"Paul\"",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Andmestikust esmase ülevaate saamine</span>"
    ]
  },
  {
    "objectID": "02-andmestiku-ylevaade.html#tunnuste-sisuga-tutvumine",
    "href": "02-andmestiku-ylevaade.html#tunnuste-sisuga-tutvumine",
    "title": "2  Andmestikust esmase ülevaate saamine",
    "section": "2.4 Tunnuste sisuga tutvumine",
    "text": "2.4 Tunnuste sisuga tutvumine\nEsmalt tasub vaadata puuduvaid väärtusi ning selle teema kohta on eraldi peatükk.\nSeejärel tasub vaadata, millised on tunnuste väärtused ja kuidas nad jagunevad. See etapp tööst on vägagi kirjeldava statistika loomise moodi.\nnumbriliste tunnuste puhul on baaskäsud min(), max(), range(), mean(), median().\n\nmin(Orange$age)\n\n[1] 118\n\n\nsobib ka käsk summary()\n\nsummary(Orange$age)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  118.0   484.0  1004.0   922.1  1372.0  1582.0 \n\n\nsummary() käsk toimib hästi ka faktor-itega.\n\ndata(\"gss_cat\")\n\n\nsummary(gss_cat$marital)\n\n    No answer Never married     Separated      Divorced       Widowed \n           17          5416           743          3383          1807 \n      Married \n        10117 \n\n\nKui tunnuse tüüp on character, siis kuvab ta summary() käsk ülevaadet vektorist. Loe, kuidas muuta tunnuste tüüpe siit.\n\nsummary(starwars$sex)\n\n   Length     Class      Mode \n       87 character character \n\n\nKäsk table() annab character tüüpi tunnusest parema ülevaate, kuid ei kuva puuduvaid väärtusi.\n\ntable(starwars$sex)\n\n\n        female hermaphroditic           male           none \n            16              1             60              6 \n\n\n\n\n\n\nCui, Boxuan. 2024. DataExplorer: Automate Data Exploration and Treatment. https://CRAN.R-project.org/package=DataExplorer.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Andmestikust esmase ülevaate saamine</span>"
    ]
  },
  {
    "objectID": "03-tehniline-tunnused.html",
    "href": "03-tehniline-tunnused.html",
    "title": "3  Tehniline töö tunnustega",
    "section": "",
    "text": "3.1 Tunnuste muutmine\nTehniline töö tunnustega tähendab minu jaoks andmestiku ettevalmistust sisulisemaks analüüsiks. Minu jaoks on see etapp, kus piirid ettevalmistava töö ja kirjeldava statistika vahel hakkavad hägustuma, sest tunnuste väärtuste jaotust vaadatakse mõlemas osas. Seepärast on siin peatükkis juttu kohati mõlemast, sest andmete puhastamisel (ehk analüüsi ettevalmistavas etapis) on vaja kasutada samu võtteid, mida tehake kirjeldava statstika saamiseks. Valitakse analüüsiks sobivad tunnused, vaadatakse nende väärtuste jaotust, koostatakse uued tunnused olemasolevate tunnuste põhjalt või korrastatakse tunnuste kategooriad.",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Tehniline töö tunnustega</span>"
    ]
  },
  {
    "objectID": "03-tehniline-tunnused.html#valimine",
    "href": "03-tehniline-tunnused.html#valimine",
    "title": "3  Tehniline töö tunnustega",
    "section": "3.2 Tunnuste valimine",
    "text": "3.2 Tunnuste valimine\nTunnuste valimine tehakse selleks, et jätta kõrvale see osa andmestikust, mis tundub parasjagu ebaoluline. Ebaoluline on see osa, mida me kindlasti analüüsis ei kasuta.\nBaasversioonis toimub tunnuste valmine nurksulgude sees, mis sisaldab koma [,]. Enne koma öeldakse R-ile, millised read tuleb valida ja peale koma, millised tulbad (tunnused). Kui jätta tühjaks, valib R kõik read ja tunnused.\ntidyverse annab meeldejäävamad käsud select() ja filter().\nMiinusmärk - käsu sees näitab, millistest tunnustest loobuda. Näiteks baasversioonis käib kolme esimene tunnuse eemaldamine andmestikust nii.\n\nstarwars[, -c(1:3)] \n\n# A tibble: 87 × 11\n   hair_color    skin_color  eye_color birth_year sex   gender homeworld species\n   &lt;chr&gt;         &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;  \n 1 blond         fair        blue            19   male  mascu… Tatooine  Human  \n 2 &lt;NA&gt;          gold        yellow         112   none  mascu… Tatooine  Droid  \n 3 &lt;NA&gt;          white, blue red             33   none  mascu… Naboo     Droid  \n 4 none          white       yellow          41.9 male  mascu… Tatooine  Human  \n 5 brown         light       brown           19   fema… femin… Alderaan  Human  \n 6 brown, grey   light       blue            52   male  mascu… Tatooine  Human  \n 7 brown         light       blue            47   fema… femin… Tatooine  Human  \n 8 &lt;NA&gt;          white, red  red             NA   none  mascu… Tatooine  Droid  \n 9 black         light       brown           24   male  mascu… Tatooine  Human  \n10 auburn, white fair        blue-gray       57   male  mascu… Stewjon   Human  \n# ℹ 77 more rows\n# ℹ 3 more variables: films &lt;list&gt;, vehicles &lt;list&gt;, starships &lt;list&gt;\n\n\nTunnuseid võib valida ka nii, et ütled tunnuse nimed eraldades need komaga , või kasutad järjestike tunnuste valimisel : märki.\n\n1starwars%&gt;%\n2  select(name, hair_color:birth_year)%&gt;%\n3  head()\n\n\n1\n\nVõta andmestik starwars ja seejärel\n\n2\n\nvali tunnused “name” ja alates tunnusest “hair_color” kuni “birth_year” ja seejärel\n\n3\n\nkuva andmestiku päist\n\n\n\n\n# A tibble: 6 × 5\n  name           hair_color  skin_color  eye_color birth_year\n  &lt;chr&gt;          &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt;\n1 Luke Skywalker blond       fair        blue            19  \n2 C-3PO          &lt;NA&gt;        gold        yellow         112  \n3 R2-D2          &lt;NA&gt;        white, blue red             33  \n4 Darth Vader    none        white       yellow          41.9\n5 Leia Organa    brown       light       brown           19  \n6 Owen Lars      brown, grey light       blue            52  \n\n\nKäsud starts_with() ja ends_with() lihtsustavad tunnuste valimist veelgi.\n\nstarwars%&gt;%\n1  select(starts_with(\"s\"))%&gt;%\n  head()\n\n\n1\n\nvalib tunnused, mille nimi algab “s” tähega\n\n\n\n\n# A tibble: 6 × 4\n  skin_color  sex    species starships\n  &lt;chr&gt;       &lt;chr&gt;  &lt;chr&gt;   &lt;list&gt;   \n1 fair        male   Human   &lt;chr [2]&gt;\n2 gold        none   Droid   &lt;chr [0]&gt;\n3 white, blue none   Droid   &lt;chr [0]&gt;\n4 white       male   Human   &lt;chr [1]&gt;\n5 light       female Human   &lt;chr [0]&gt;\n6 light       male   Human   &lt;chr [0]&gt;\n\n\n\nstarwars%&gt;%\n1  select(ends_with(\"color\"))%&gt;%\n  head()\n\n\n1\n\nvalib tunnused, mille nimi lõpeb sõnaga “color”\n\n\n\n\n# A tibble: 6 × 3\n  hair_color  skin_color  eye_color\n  &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;    \n1 blond       fair        blue     \n2 &lt;NA&gt;        gold        yellow   \n3 &lt;NA&gt;        white, blue red      \n4 none        white       yellow   \n5 brown       light       brown    \n6 brown, grey light       blue     \n\n\nTunnuste valimine nende sisu järgi on R-is tunnuse filteerimine ja toimub käsuga filter(). Kui me ei täpsuta käsuga select(), siis jätakse alles kõik andmesikus olevad tunnused.\n\nstarwars%&gt;%\n1  filter(mass&lt;20)%&gt;%\n  head()\n\n\n1\n\nvalitakse tunnuse mass väärtuste alusel need read, kus mass on väiksem kui 20\n\n\n\n\n# A tibble: 2 × 14\n  name      height  mass hair_color skin_color eye_color birth_year sex   gender\n  &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; \n1 Yoda          66    17 white      green      brown            896 male  mascu…\n2 Ratts Ty…     79    15 none       grey, blue unknown           NA male  mascu…\n# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,\n#   vehicles &lt;list&gt;, starships &lt;list&gt;\n\n\nTeksti sildava tunnus väärtus peab olema kirjutatud jutumärkide \"\" sisse.\n\nstarwars%&gt;%\n  filter(hair_color==\"white\")%&gt;%\n  head()\n\n# A tibble: 4 × 14\n  name      height  mass hair_color skin_color eye_color birth_year sex   gender\n  &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; \n1 Yoda          66    17 white      green      brown            896 male  mascu…\n2 Ki-Adi-M…    198    82 white      pale       yellow            92 male  mascu…\n3 Dooku        193    80 white      fair       brown            102 male  mascu…\n4 Jocasta …    167    NA white      fair       blue              NA fema… femin…\n# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,\n#   vehicles &lt;list&gt;, starships &lt;list&gt;\n\n\nTekst-i sisaldava tunnuse puhul võib kasutada ka %in% ning see toimib hästi vektor-itega. Loe vektor-ite kohta siit.\n\nstarwars%&gt;%\n  filter(hair_color%in%c(\"grey\", \"white\"))\n\n# A tibble: 5 × 14\n  name      height  mass hair_color skin_color eye_color birth_year sex   gender\n  &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; \n1 Yoda          66    17 white      green      brown            896 male  mascu…\n2 Palpatine    170    75 grey       pale       yellow            82 male  mascu…\n3 Ki-Adi-M…    198    82 white      pale       yellow            92 male  mascu…\n4 Dooku        193    80 white      fair       brown            102 male  mascu…\n5 Jocasta …    167    NA white      fair       blue              NA fema… femin…\n# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,\n#   vehicles &lt;list&gt;, starships &lt;list&gt;\n\n\nTeksti puhul võib teinekord olla parem kasutada käsku str_detect(), mis tuvastab huvitava sõna esinemise andmelahtris, sest andmelahter ei pruugi sisaldada ainult seda otsitavat teksti. (Loe tekstide sisaldavate tunnuste kohta rohkem siit)\n\n\n\n\n\n\nPane tähele, et eelmise filtreerimisega (hair_color==“white”) ei tulnud välja need tegelesed, kelle juustes on halli (grey) ja mõnda teist värvi. str_detect() lahendab selle mure.\n\n\n\n\nstarwars%&gt;%\n  filter(str_detect(hair_color, \"grey\"))\n\n# A tibble: 3 × 14\n  name      height  mass hair_color skin_color eye_color birth_year sex   gender\n  &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; \n1 Owen Lars    178   120 brown, gr… light      blue              52 male  mascu…\n2 Wilhuff …    180    NA auburn, g… fair       blue              64 male  mascu…\n3 Palpatine    170    75 grey       pale       yellow            82 male  mascu…\n# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,\n#   vehicles &lt;list&gt;, starships &lt;list&gt;\n\n\nKui on soov filtreerida mitme väärtuse põhjal kasutades “on võrdne” tähist (==) on sage oht segi ajada | ja &. Kui soovime leida kahte nahatooni (nt “fair” ja “pale”) peame kasutama | sümbolit ja mitte &.\n\nstarwars%&gt;%\n1  filter(skin_color==\"fair\" |\n2           skin_color==\"pale\")\n\n\n1\n\nfiltreeri read, kus tunnuse väärtus on võrdne sõnaga “fair” või\n\n2\n\nvõrdne sõnaga “pale”.\n\n\n\n\n# A tibble: 22 × 14\n   name     height  mass hair_color skin_color eye_color birth_year sex   gender\n   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; \n 1 Luke Sk…    172  77   blond      fair       blue            19   male  mascu…\n 2 Obi-Wan…    182  77   auburn, w… fair       blue-gray       57   male  mascu…\n 3 Anakin …    188  84   blond      fair       blue            41.9 male  mascu…\n 4 Wilhuff…    180  NA   auburn, g… fair       blue            64   male  mascu…\n 5 Han Solo    180  80   brown      fair       brown           29   male  mascu…\n 6 Wedge A…    170  77   brown      fair       hazel           21   male  mascu…\n 7 Jek Ton…    180 110   brown      fair       blue            NA   &lt;NA&gt;  &lt;NA&gt;  \n 8 Palpati…    170  75   grey       pale       yellow          82   male  mascu…\n 9 Boba Fe…    183  78.2 black      fair       brown           31.5 male  mascu…\n10 Mon Mot…    150  NA   auburn     fair       blue            48   fema… femin…\n# ℹ 12 more rows\n# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,\n#   vehicles &lt;list&gt;, starships &lt;list&gt;",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Tehniline töö tunnustega</span>"
    ]
  },
  {
    "objectID": "03-tehniline-tunnused.html#tyybi-muutmine",
    "href": "03-tehniline-tunnused.html#tyybi-muutmine",
    "title": "3  Tehniline töö tunnustega",
    "section": "3.3 Tunnuste tüübi muutmine",
    "text": "3.3 Tunnuste tüübi muutmine\nMõnikord avastame, et tunnused on andmestikus nn vales klassis ning need on vaja ära muuta. Sõltuvalt sellest, milliseks tüübiks on soov tunnust muuta on käsud as.numeric(), as.character(), as.factor. Samad käsud toimivad ka alakriipsuga (näiteks as_numeric())\n\n\n\n\n\n\nKuupäevadeks muutmine vajab eraldi peatükki ning see on tegemisel.\n\n\n\nTeen näite läbi käsuga as.factor(). Tunnuse sex tüüp on algselt character.\n\nclass(starwars$sex)\n\n[1] \"character\"\n\n\nSoovime, et on tunnus sex oleks kategoriaalne ehk faktor.\n\n\n\n\n\n\nKui sa ei ole endas kindel, kas kasutad käske õigesti, tee esmalt oma andmestikust koopia ja harjuta tunnuste muutmist seal.\n\n\n\n\n1test&lt;-starwars\n2test$sex&lt;-as_factor(test$sex)\ntest$mass&lt;-as.factor(test$mass)\n3class(test$sex)\nclass(test$mass)\n\n\n1\n\nkopeerin andmestiku starwars ja panen talle nimeks test\n\n2\n\nmuudan tunnused faktor tüübiks\n\n3\n\nkontrollin kas muutmine õnnestus\n\n\n\n\n[1] \"factor\"\n[1] \"factor\"\n\n\nfactor tunnuste muutmine numeric tunnusteks tegemisel tuleb tunnus teha esmalt character tüüpi tunnuseks. Seda saab teha kasutades koos käske as.character() ja as.numeric() koos.\n\ntest$mass&lt;-as.numeric(as.character(test$mass))\nclass(test$mass)\n\n[1] \"numeric\"",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Tehniline töö tunnustega</span>"
    ]
  },
  {
    "objectID": "03-tehniline-tunnused.html#nime-muutmine",
    "href": "03-tehniline-tunnused.html#nime-muutmine",
    "title": "3  Tehniline töö tunnustega",
    "section": "3.4 Tunnuste nimede muutmine",
    "text": "3.4 Tunnuste nimede muutmine\nVaatame andmestiku Orange nimesid käsuga names()\n\nnames(Orange)\n\n[1] \"Tree\"          \"age\"           \"circumference\"\n\n\nSoovin nad muuta korraga ära tehes esmalt vektori “uued_nimed” uutest nimedest. (Loe vektorite kohta siit.)\n\nuued_nimed&lt;-c(\"puu\", \"vanus\", \"ymbermoot\")\n\nnames() käsuga saan muuta ära ka andmestiku nimed öeldes, millisest vectorist uued nimed võtta.\n\nnames(Orange)&lt;-uued_nimed\n\nVaatan, kas tunnuste nimed läksid õigesti taaskasutades käsku head()\n\nhead(Orange)\n\n  puu vanus ymbermoot\n1   1   118        30\n2   1   484        58\n3   1   664        87\n4   1  1004       115\n5   1  1231       120\n6   1  1372       142\n\n\nEemaldan vektor-i “uued_nimed” Environment keskkonnast.\n\nrm(uued_nimed)\n\nNimesid saab muuta ka valikuliselt käsuga rename().\n\nOrange%&gt;%\n  rename(uus_nimi=puu,\n         ym=ymbermoot)%&gt;%\n  head(2)\n\n  uus_nimi vanus ym\n1        1   118 30\n2        1   484 58",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Tehniline töö tunnustega</span>"
    ]
  },
  {
    "objectID": "03-tehniline-tunnused.html#sisu-muutmine",
    "href": "03-tehniline-tunnused.html#sisu-muutmine",
    "title": "3  Tehniline töö tunnustega",
    "section": "3.5 Tunnuste sisu muutmine",
    "text": "3.5 Tunnuste sisu muutmine\nTunnuste sisu1 muutmisel teeme kas täitsa uued tunnused olemasoleva põhjalt või kirjutame olemasoleva tunnuse üle.\nKui on soov muuta numbrilist tunnust mingi teise numbri või numbrilise tunnusega, saab seda teha väga lihtsalt ja kasutada R-i kui tavalist kalkulaatorit. Näiteks teisendame tunnuse height sentimeetritest meetriteks jagades tunnust 100-ga.\n\nstarwars$pikkus_m&lt;-starwars$height/100\n\n\nstarwars%&gt;%\n  select(height, pikkus_m)%&gt;%\n  head()\n\n# A tibble: 6 × 2\n  height pikkus_m\n   &lt;int&gt;    &lt;dbl&gt;\n1    172     1.72\n2    167     1.67\n3     96     0.96\n4    202     2.02\n5    150     1.5 \n6    178     1.78\n\n\nArvutada saab ka kahe olemasoleva tunnuse järgi tehes samamoodi tehe. Arvutame tegelaste kehamassindeksi(kmi). Teeme selleks arvutustehte, kus jagame kehakaalu pikkuse ruuduga ^2.\n\nstarwars$kmi&lt;-starwars$mass/(starwars$pikkus_m)^2\n\n\nstarwars%&gt;%\n  select(name, kmi)%&gt;%\n  head(3)\n\n# A tibble: 3 × 2\n  name             kmi\n  &lt;chr&gt;          &lt;dbl&gt;\n1 Luke Skywalker  26.0\n2 C-3PO           26.9\n3 R2-D2           34.7\n\n\n\n\n\n\n\n\nR teeb selliseid arvutusi nagu talle ütled. R ei ole kriitiline ega ütle sulle, et kehamassi-indeksi arvutusvalem on mõeldud inimeste kehakaalu ja pikkuse suhte arvutamiseks ning järeldusi droidide või teiste liikide esindajate kohta teha ei saa. Nii nagu iga analüüsimeetodi kasutamisel peab ise mõtlema, kas see on parasjagu sobilik meetod ja tunnuste kasutamine meetodi sees loogiline.\n\n\n\nTunnuste sisu muutmiseks on käsk mutate() koos mõne järgmise käsuga:\n\nif_else() - juhul kui käsk sobib hästi üksiku tunnuse muutmiseks kui ka mitme tunnuse üheaegseks muutmiseks. vaata näidet\nrecode() - juhul kui soovime muuta tunnuse väärtusi vaata näidet\ncase_when() - sobib keerulistema lausete tegemiseks uute või olemasolevate tunnuste väärtuste muutmisel. Vaata näidet\n\nKuid vajalik on tunda käske separate() ja unite(). Vaata nende käskude kasutamist siit\nTunnuste kategooria-te ühendamiseks vaata ka siia. Teksti sisaldavate tunnustega töötamisel vaata siia.\n\nÜksiku väärtuse muutmine\nTunnuse väärtus on tunnuse sisu. Näiteks tunnuse “name” väärtusteks on tegelaste nimed. “Luke Skywalker” on tunnuse “name” üks väärtus.\nNäiteks soovime muuta tegelast “Gregor Typho” ja öelda, et ta on liigilt (tunnus “species”) inimene.\n\n1test&lt;-starwars%&gt;%\n2  mutate(species=if_else(\n3    name==\"Gregar Typho\",\n4    \"Inimene\",\n5    species))\n\n\n1\n\nLoo koopia nimega “test” andmestikust “starwars”;\n\n2\n\nmuuda tunnust “species” juhul kui\n\n3\n\npärast kontrolli, et tunnuse “name” väärtus on võrdne tekstiga “Gregar Typho”;\n\n4\n\nselgub, et see2 on tõesti on nii, siis pane väärtuseks “Inimene”;\n\n5\n\nkui see ei ole nii, siis kasuta seda väärtust, mis oli.\n\n\n\n\nNüüd vaatan, kas muutmine õnnestus.\n\ntest%&gt;%\n  select(name, species)%&gt;%\n  filter(name==\"Gregar Typho\")\n\n# A tibble: 1 × 2\n  name         species\n  &lt;chr&gt;        &lt;chr&gt;  \n1 Gregar Typho Inimene\n\n\n\n\n\n\n\n\nAlati kontrolli oma tehtud töö üle, kas muutsid ikka seda tunnust ja sellisel viisil, mida muuta soovisid. Kui kontrollid oma tööd nii, et vaatad ainult seda tunnust, mida muuta tahtsid, ei leia sa üles võimalikke vigu, mida tunnuste muutmisel teha võisid.\n\n\n\nSama asja tegemine baasversioonis käib käsu which()abil ning asendan kategooria “Inimene” kategooriaga “Human”.\n\ntest$species[which(test$name==\"Gregar Typho\")] &lt;- \"Human\"\n\n\n\n\n\n\n\nKäsku if_else() saab kasutada edukat ka terve vektori muutmiseks ja mitte ainult üksiku väärtuse muutmiseks.\n\n\n\n\n\nTunnuse väärtuse muutmine\nTunnuse väärtuste muutmiseks saab kasutada ka käsu recode().\n\ntable(starwars$gender)\n\n\n feminine masculine \n       17        66 \n\n\n\n1recode(starwars$gender,\n2       feminine= \"naiselik\",\n       masculine= \"mehelik\")%&gt;%\n3  table()\n\n\n1\n\nKodeeri starwars andmestikust tunnus gender ringi\n\n2\n\nAnnan uute kategooriate nimed ja seejärel\n\n3\n\nVaatan, kas muutmine õnnestus\n\n\n\n\n.\n mehelik naiselik \n      66       17 \n\n\n\n\nMitme tunnuse põhjal uute väärtuse loomine\nOletame, et soovin saada ülevaadet lühikestest inimesest nii, et on kaks kategooriat “pikk inimene” ja “lühike inimene”. Tahan teha selleks uut tunnust nimega “pikkuse_liik”. Kategooria “pikk inimene” alla soovin lisada kõik inimesed, kes on vähemalt 160 cm pikad. Teise kategooriasse “lühike inimene” ja soovin lisada kõik inimesed, kes on lühemad kui 160cm. Soovin vaadata üle, kas paljude tegelaste liik või mass on teadmata, et emba-kumba vajadusel täpsustama minna (st küsima liiki või mõõtma pikkust).\n\n1test&lt;-starwars%&gt;%\n2  mutate(pikkuse_liik=case_when(\n3    species==\"Human\" & height &gt; 159 ~ \"pikk inimene\",\n4    species==\"Human\" & height &lt; 160 ~ \"lühike inimene\",\n5    is.na(species) ~ \"ei tea, kas on inimene\",\n6    is.na(height) ~ \"ei tea, kui pikk on\"\n  ))\n\n\n1\n\nLoo koopia nimega “test” andmestikust “starwars”;\n\n2\n\nmuuda andmestikku (ja loo sinna) tunnus “pikkus_liik” juhul kui tunnus-te;\n\n3\n\nspecies sisu on “Human” ja samal ajal “height” on suurem kui 159 (ehk vähemalt 160), määra kategooria väärtuseks “pikk inimene”;\n\n4\n\nspecies sisu on “Human” ja samal ajal “height” on kuni 160 (ehk kõrgeim väärtus on 159), määra kategooria väärtuseks “lühike inimene”;\n\n5\n\nkui species on NA, määra kategooria väärtuseks “ei tea, kas on inimene”;\n\n6\n\nkui species on NA, määra kategooria väärtuseks “ei tea, kui pikk on”.\n\n\n\n\nVaatan, kas tekkis tunnuse alla neli kategooriat ja nende alla ka inimesi.\n\ntable(test$pikkuse_liik)\n\n\nei tea, kas on inimene    ei tea, kui pikk on         lühike inimene \n                     4                      6                      2 \n          pikk inimene \n                    28 \n\n\nNüüd aga otsustan, et kirjutan olemasoleva tunnuse üle nii, et need kelle pikkus või liik on teadmata (NA), lähevad kategooria alla “ei saa kategoriseerdia” ning kõigi ülejäänutel jääb kategooria samaks.\n\n1test&lt;-test%&gt;%\n2  mutate(pikkuse_liik=case_when(\n3    is.na(species) | is.na (height) ~ \"ei saa kategoriseerida\",\n4    TRUE ~ pikkuse_liik\n  ))\n\n\n1\n\nKirjuta andmestik “test” üle;\n\n2\n\nmuuda olemasolevat tunnus-t “pikkus_liik” juhul kui tunnus-te;\n\n3\n\nspecies sisu on teadmata (NA) või heigth sisu on teadmata (NA), määra neile kategooria “ei saa kategoriseerida”;\n\n4\n\nülejäänute vaatlus-tel jäta kategooria nii nagu on pikkuse_liik.\n\n\n\n\n\ntable(test$pikkuse_liik)\n\n\nei saa kategoriseerida         lühike inimene           pikk inimene \n                    10                      2                     28 \n\n\n\n\n\n\n\n\nJäta meelde, et kõik ülejäänud read, mis ei sobitu ühegi kategooria alla jäävad tühjaks ehk NA.\n\n\n\n\n\nTunnuste sisu eraldamine\nSoovin eraldada tunnuse “name” sisu nii, et ühes tulbas on eesnimed ja teised ainult perekonnanimed. Selleks on käsk separate().\n\n1starwars%&gt;%\n2  separate(col=name,\n3           into = c(\"eesnimi\", \"perenimi\"),\n4           sep = \" \")%&gt;%\n5  head()\n\n\n1\n\nÜtleme, millise andmestiku,\n\n2\n\nmillist tunnust eraldame;\n\n3\n\nmis saavad olema nende uute tunnuste nimed ja\n\n4\n\nmille kaudu eraldada (tühik \" \") ja siis\n\n5\n\nvaatame siin näites kohe ka päist, kas muutmine õnnestus.\n\n\n\n\n# A tibble: 6 × 17\n  eesnimi perenimi height  mass hair_color skin_color eye_color birth_year sex  \n  &lt;chr&gt;   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;\n1 Luke    Skywalk…    172    77 blond      fair       blue            19   male \n2 C-3PO   &lt;NA&gt;        167    75 &lt;NA&gt;       gold       yellow         112   none \n3 R2-D2   &lt;NA&gt;         96    32 &lt;NA&gt;       white, bl… red             33   none \n4 Darth   Vader       202   136 none       white      yellow          41.9 male \n5 Leia    Organa      150    49 brown      light      brown           19   fema…\n6 Owen    Lars        178   120 brown, gr… light      blue            52   male \n# ℹ 8 more variables: gender &lt;chr&gt;, homeworld &lt;chr&gt;, species &lt;chr&gt;,\n#   films &lt;list&gt;, vehicles &lt;list&gt;, starships &lt;list&gt;, pikkus_m &lt;dbl&gt;, kmi &lt;dbl&gt;\n\n\n\n\n\n\n\n\nPane tähele, et eraldatav tunnus kaob andmestikust ära. Kui soovid alles jätta originaaltunnuse, siis tee sellest esmalt andmestikku koopia.\n\n\n\nEraldajaks (sep=) võib olla ka number. Näiteks tahame eraldada andmestiku gss_cat tunnust “year” nii, et esimeses tulbas on “sajand” ja teises “kümnend”. Esmalt võtame andmestiku kasutusele ja vaatame esimest kolme rida.\n\ndata(\"gss_cat\")\nhead(gss_cat,3)\n\n# A tibble: 3 × 9\n   year marital         age race  rincome        partyid     relig denom tvhours\n  &lt;int&gt; &lt;fct&gt;         &lt;int&gt; &lt;fct&gt; &lt;fct&gt;          &lt;fct&gt;       &lt;fct&gt; &lt;fct&gt;   &lt;int&gt;\n1  2000 Never married    26 White $8000 to 9999  Ind,near r… Prot… Sout…      12\n2  2000 Divorced         48 White $8000 to 9999  Not str re… Prot… Bapt…      NA\n3  2000 Widowed          67 White Not applicable Independent Prot… No d…       2\n\n\nNüüd eraldame tunnuse nii, et kirjutame alates mitmendast tähemärgist eraldamine teha tuleb (antud näite puhul pärast teist tähemärki).\n\ngss_cat%&gt;%\n  separate(col=year,\n           into = c(\"sajand\", \"kymnend\"),\n1           sep = 2)%&gt;%\n  head(3)\n\n\n1\n\nEralda alates pärast teist tähemärki\n\n\n\n\n# A tibble: 3 × 10\n  sajand kymnend marital         age race  rincome   partyid relig denom tvhours\n  &lt;chr&gt;  &lt;chr&gt;   &lt;fct&gt;         &lt;int&gt; &lt;fct&gt; &lt;fct&gt;     &lt;fct&gt;   &lt;fct&gt; &lt;fct&gt;   &lt;int&gt;\n1 20     00      Never married    26 White $8000 to… Ind,ne… Prot… Sout…      12\n2 20     00      Divorced         48 White $8000 to… Not st… Prot… Bapt…      NA\n3 20     00      Widowed          67 White Not appl… Indepe… Prot… No d…       2\n\n\n\n\nTunnuste sisu ühendamine\nSoovin ühendada kahe tunnuse väärtuseid nii, et neist tekib üks uus tunnus. Näiteks tahan panna kokku starwars tegelased nende liigi (species) ja kodumaailma (homeworld) järgi. Seda saab teha käsuga unite(). See on sarnale käsule separate(), kuid nagu pööratult.\n\nEsmalt ütled ühendamiseks uue tunnuse nime,\nseejäre, milliste tunnuste sisu sinna ühendada,\nja kas või mis peaks olema ühendatava tunnuste väärtuste vahel.\n\n\nstarwars%&gt;%\n  unite(col=paritolu,\n        homeworld, species,\n1        sep=\", \") %&gt;%\n  select(name, paritolu)%&gt;%\n  head()\n\n\n1\n\npane tähele, et siin on koma järele lisatud tühik\n\n\n\n\n# A tibble: 6 × 2\n  name           paritolu       \n  &lt;chr&gt;          &lt;chr&gt;          \n1 Luke Skywalker Tatooine, Human\n2 C-3PO          Tatooine, Droid\n3 R2-D2          Naboo, Droid   \n4 Darth Vader    Tatooine, Human\n5 Leia Organa    Alderaan, Human\n6 Owen Lars      Tatooine, Human\n\n\n\n\n\n\n\n\nSarnaselt separate() käsule kaotab unite() käsk liidetavad tunnused andmestikust ära. Kui sa seda ei soovi, tee esmalt tunnustest andmestikku koopia.\n\n\n\nJuhul kui ei soovi, et kahe liidetava tunnuse väärtuse vahel oleks mõni eraldav tähemärk, pane eraldajaks jutumärgid ilma tühikuta \"\" .",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Tehniline töö tunnustega</span>"
    ]
  },
  {
    "objectID": "03-tehniline-tunnused.html#footnotes",
    "href": "03-tehniline-tunnused.html#footnotes",
    "title": "3  Tehniline töö tunnustega",
    "section": "",
    "text": "Kasutan mugavama lugemise huvides sünonüümidena tunnuse sisu ja tunnuse väärtus.↩︎\nEhk tunnuse “name” lahter võrdne tekstiga “Gregar Typho”↩︎",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Tehniline töö tunnustega</span>"
    ]
  },
  {
    "objectID": "04-faktor-string.html",
    "href": "04-faktor-string.html",
    "title": "4  Töö teksti sisaldavate tunnustega",
    "section": "",
    "text": "4.1 Töö factor-ite ehk kategooriatega\nKategoriaalsete tunnuste muutmiseks ei pea (kuigi võib) kasutada käskude mutate() ja case_when või if_else() kombinatsioone. Pakett forcats(Wickham 2023) teeb kategoriaalsete tunnuste muutmise lihtsaks ning kui on kasutusel pakett tidyverse, siis see on juba kasutusele võetud.\nLoe paketi kohta rohkem siit.\nTunnused peavad olema factor-id. Loe vajadusel tunnuste tüübi muutmist siit.",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Töö teksti sisaldavate tunnustega</span>"
    ]
  },
  {
    "objectID": "04-faktor-string.html#forcats",
    "href": "04-faktor-string.html#forcats",
    "title": "4  Töö teksti sisaldavate tunnustega",
    "section": "",
    "text": "Kategooriate järjestuse muutmine\nVaikimisi on kõik kategooriad reastatud tähestiku järjekorras ning neid kuvatakse nii ka kokkuvõtete või jooniste tegemisel. Näiteks summary() käsk näitab (faktoriks muudetud) tunnust nii. Vaata, kuidas muuta tunnuste tüüpi siit.\n\nsummary(starwars$sex)\n\n          male           none         female hermaphroditic           NA's \n            60              6             16              1              4 \n\n\nTasemeid saab vaadata käsuga levels().\n\nlevels(starwars$sex)\n\n[1] \"male\"           \"none\"           \"female\"         \"hermaphroditic\"\n\n\nMuudame kategooriate esitamise ringi vastavalt sagedusele, ehk kõige suurem kategooria kuvatakse kõige esimesena. Kasutame käsku fct_infreq().\n\nstarwars$sex&lt;-fct_infreq(starwars$sex, ordered = NA)\n\n\nlevels(starwars$sex)\n\n[1] \"male\"           \"female\"         \"none\"           \"hermaphroditic\"\n\n\nOletame, et soovime näidata vastupidi. Kõige vähem esinevat kategooriat kõige eespool. Muudame kategooriate järjestuse tagurpidi fct_rev().\nKui eelnevalt pole järjestust muudetud, siis paneb see käsk kategooriad tähestiku tagant poolt ette poole jooksma.\n\nstarwars$sex&lt;-fct_rev(starwars$sex)\n\n\nlevels(starwars$sex)\n\n[1] \"hermaphroditic\" \"none\"           \"female\"         \"male\"          \n\n\nKui on vajadus esitada kategooriaid selles järjekorras nagu nad andmestikus esinevad, siis on käsk fct_inorder().\n\nstarwars$sex&lt;-fct_inorder(starwars$sex)\n\n\nlevels(starwars$sex)\n\n[1] \"male\"           \"none\"           \"female\"         \"hermaphroditic\"\n\n\nLisaks on võimalik käsu factor() sees kirjutada käsitsi täpselt see järjekord nagu parasjagu soov on. Sama asja saab teha ka paketiga forcats käsuga fct_relevel() (vaata näidet veidike all pool).\n\nstarwars$sex&lt;-factor(starwars$sex,\n                      levels=c(\n1                      \"male\",\"female\",\"none\", \"hermaphroditic\"),\n2                     ordered=T)\n\n\n1\n\nKirjutab väärtuste kategooriate nimed\n\n2\n\nÜtleb, et kategooriate tasemed peavad olema esitatud järjekorras\n\n\n\n\nfct_count() annab ka ülevaate, kuidas jagunevad tunnuse väärtused reastatud kategooriate järgi ning kui suured need kategooriad on. See käsk on parem kui table(), sest näitab kohe ka puuduvaid väärtusi.\n\nfct_count(starwars$sex)\n\n# A tibble: 5 × 2\n  f                  n\n  &lt;ord&gt;          &lt;int&gt;\n1 male              60\n2 female            16\n3 none               6\n4 hermaphroditic     1\n5 &lt;NA&gt;               4\n\n\nKordame sama, et kirjutame ise kategooriate järjekorra käsuga fct_relevel(). Selle käsu puhul peab veidi vähem koodi kirjutama.\n\nstarwars$sex&lt;-fct_relevel(starwars$sex,\n                          c(\"none\", \"female\", \"hermaphroditic\", \"male\"))\n\n\nfct_count(starwars$sex)\n\n# A tibble: 5 × 2\n  f                  n\n  &lt;ord&gt;          &lt;int&gt;\n1 none               6\n2 female            16\n3 hermaphroditic     1\n4 male              60\n5 &lt;NA&gt;               4\n\n\n\n\nKategooriate ühendamine\nKui on soov panna kaks kategooriat kokku, siis on sobiv käsk fct_collapse(). Sama asja saab teha käskudega mutate ja case_when(), kuid ka siin on eeliseks lühem kood.\n\n\n\n\n\n\nSoovitan andmestikus mitte muuta oringaaltunnust ja teha selleks täiesti uus tunnus.\n\n\n\n\nstarwars$sugu&lt;-fct_collapse(starwars$sex,\n                            male=\"male\",\n                            female=\"female\",\n1                            other=c(\"none\", \"hermaphroditic\"))\n\n\n1\n\nÜtleb, milliste kategooriate nimed, tuleb panna kategooria “other” alla.\n\n\n\n\nfct_count() on uute kategooriate jagunemise vaatamiseks parem kui table(), kuna näitab ära ka puuduvad väärtused.\n\ntable(starwars$sugu)\n\n\n other female   male \n     7     16     60 \n\n\n\nfct_count(starwars$sugu)\n\n# A tibble: 4 × 2\n  f          n\n  &lt;ord&gt;  &lt;int&gt;\n1 other      7\n2 female    16\n3 male      60\n4 &lt;NA&gt;       4\n\n\nÜpris sagedasti on andmete esitamisel vaja kokku liita kategooria “muu” alla need read, mida on andmestikus vähem kui viis. Selleks tegevuseks on hea kasutada käsku fct_lump_min().\n\nstarwars$kodumaa&lt;-fct_lump_min(starwars$homeworld,\n1                               5,\n2                               other_level = \"muu\")\n\n\n1\n\nÜtleb kui suur võib olla grupp, mida ei panda other_level hulka\n\n2\n\nÜtlem, mis panna other_level grupi (ehk kokkuliidetud grupi) nimeks.\n\n\n\n\n\nfct_count(starwars$kodumaa)\n\n# A tibble: 4 × 2\n  f            n\n  &lt;fct&gt;    &lt;int&gt;\n1 Naboo       11\n2 Tatooine    10\n3 muu         56\n4 &lt;NA&gt;        10\n\n\nNüüd on näha, et neid tegelasi, kelle homeword on “muu”, on andmestikus kokku kõvasti rohkem kui tegelasi kõige enamlevinud maailmast.",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Töö teksti sisaldavate tunnustega</span>"
    ]
  },
  {
    "objectID": "04-faktor-string.html#stringid",
    "href": "04-faktor-string.html#stringid",
    "title": "4  Töö teksti sisaldavate tunnustega",
    "section": "4.2 Töötamine teksti ehk string-idega",
    "text": "4.2 Töötamine teksti ehk string-idega\nSee peatükk räägib, kuidas muuta tunnuseid, mis on character tüüpi.\nSee peatükk ei räägi tekstikaevest ega tekstianalüüsist.\ncharacter tüüpi tunnus on R-is string. Vaata ka tunnuste tüübid ja vajadusel loe tehnilise töö kohta juurde siit.\nPaketiga tidyverse tuleb kaasa pakett stringr(Wickham 2022), kus kõik käsud algavad lühendiga str_.\nKasutame näidisena nimede vektorit starwars tegelastest, kes on pärit maailmast “Tatooine” (vaata ka mis on vektor.) Esmalt peame selle vektori aga tegema.\n\n1nimed&lt;-starwars%&gt;%\n  filter(homeworld==\"Tatooine\")%&gt;%\n2  select(name)%&gt;%\n3  as_vector()\n\n\n1\n\nSalvestab objekti nimed\n\n2\n\njätab alles ainult ühe tulba tunnuseid\n\n3\n\nsalvestab need väärtused vektoriks\n\n\n\n\n\nnimed\n\n               name1                name2                name3 \n    \"Luke Skywalker\"              \"C-3PO\"        \"Darth Vader\" \n               name4                name5                name6 \n         \"Owen Lars\" \"Beru Whitesun Lars\"              \"R5-D4\" \n               name7                name8                name9 \n \"Biggs Darklighter\"   \"Anakin Skywalker\"     \"Shmi Skywalker\" \n              name10 \n       \"Cliegg Lars\" \n\n\nstr_detect() kontrollib, kas vector tunnuse väärtused sisaldavad mingit kindlat väärtust. Vastuse antakse TRUE/FALSE põhimõttel ehk kas on või ei ole otsitav väärtus andmevälja sees.\nVaatame, kas mõnel Tatooine tegelasel on nimi “Lars”.\n\nstr_detect(nimed, \"Lars\")\n\n [1] FALSE FALSE FALSE  TRUE  TRUE FALSE FALSE FALSE FALSE  TRUE\n\n\nKui selline kasutus võib tunduda ebamugav, siis kasulikuks muutub see käsk siis, kui kasutame seda mõne muu käsuga koos (nt filter() nagu tegime seda hallide juustega starwars tegelaste puhul). Kordame seda näidet nüüd, aga filtreerime välja starwars andmestikust need tegelased, kelle nimes tuvastame teksti “Lars”.\n\nstarwars%&gt;%\n  filter(str_detect(name, \"Lars\"))\n\n# A tibble: 3 × 14\n  name      height  mass hair_color skin_color eye_color birth_year sex   gender\n  &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; \n1 Owen Lars    178   120 brown, gr… light      blue              52 male  mascu…\n2 Beru Whi…    165    75 brown      light      blue              47 fema… femin…\n3 Cliegg L…    183    NA brown      fair       blue              82 male  mascu…\n# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,\n#   vehicles &lt;list&gt;, starships &lt;list&gt;\n\n\nSarnaselt töötab ka käsk str_subset(). Ütleme, et me tahame teada kelle nimed andmestikus sisaldavad nime “Lars”?\n\nstr_subset(starwars$name, \"Lars\")\n\n[1] \"Owen Lars\"          \"Beru Whitesun Lars\" \"Cliegg Lars\"       \n\n\nKoos filtriga peaks selle vektori eelnevalt salvestama ja kasutama vektorit filter() käsu sees.\n\nlars_vektor&lt;-str_subset(starwars$name, \"Lars\")\n\nstarwars%&gt;%\n  filter(name%in%lars_vektor)\n\n# A tibble: 3 × 14\n  name      height  mass hair_color skin_color eye_color birth_year sex   gender\n  &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; \n1 Owen Lars    178   120 brown, gr… light      blue              52 male  mascu…\n2 Beru Whi…    165    75 brown      light      blue              47 fema… femin…\n3 Cliegg L…    183    NA brown      fair       blue              82 male  mascu…\n# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,\n#   vehicles &lt;list&gt;, starships &lt;list&gt;\n\n\nOletame, et perekond Lars muutis oma nime ning nüüd on nad edaspidi kõik perekonnanimega Sarl. Üks võimalus on teha seda muidugi käskudega mutate()ja if_else() (vaata kuidas siit), kuid mugavam on muuta sisu teha käskudega str_replace() või str_replace_all().\n\nTunnuse sisu asendamine\n\n\n\n\n\n\nKui on vaja muuta kogu tunnust võib abi olla käsust recode().\n\n\n\nEsmalt tuleb str_replace() puhul öelda käsu sees, millist tunnust muuta ja seejärel millist stringi asendada millise sõnaga.\n\n#str_replcae(tunnus, \"vana string\", \"uus string\")\n\n\nstr_replace(nimed, \"Lars\", \"Sarl\")\n\n [1] \"Luke Skywalker\"     \"C-3PO\"              \"Darth Vader\"       \n [4] \"Owen Sarl\"          \"Beru Whitesun Sarl\" \"R5-D4\"             \n [7] \"Biggs Darklighter\"  \"Anakin Skywalker\"   \"Shmi Skywalker\"    \n[10] \"Cliegg Sarl\"       \n\n\nOletame, et “r” täht on ära keelatud ja see on vaja nüüd igal pool (stringi alguses, keskel jne) ära muuta täheks “x”. (Utoopia muidugi, aga käsu töö näitamiseks ei tulnud paremat ideed.)\n\nstr_replace_all(nimed, \"r\", \"x\")\n\n [1] \"Luke Skywalkex\"     \"C-3PO\"              \"Daxth Vadex\"       \n [4] \"Owen Laxs\"          \"Bexu Whitesun Laxs\" \"R5-D4\"             \n [7] \"Biggs Daxklightex\"  \"Anakin Skywalkex\"   \"Shmi Skywalkex\"    \n[10] \"Cliegg Laxs\"       \n\n\nOletame, et soovime stringi muuta nii, et me ei taha sealt midagi asendada, vaid soovime olemasolevale lisada juurde. Näiteks paneme iga nime ette tiitli “härra” (sõltumata sellest, kas ta on härra või ei).\nKasutame käsku str_sub().\n\nstr_sub(nimed, 1, 0) &lt;- \"härra \"\n\n\nnimed\n\n [1] \"härra Luke Skywalker\"     \"härra C-3PO\"             \n [3] \"härra Darth Vader\"        \"härra Owen Lars\"         \n [5] \"härra Beru Whitesun Lars\" \"härra R5-D4\"             \n [7] \"härra Biggs Darklighter\"  \"härra Anakin Skywalker\"  \n [9] \"härra Shmi Skywalker\"     \"härra Cliegg Lars\"       \n\n\nVõtame nüüd uuesti nimest “härra” välja nii, et asendame härra mitte millegagi.\n\n\n\n\n\n\nTeksti eemaldamisel mõtle kohe ka whitespace eemaldamise peale. Järgmise käsu näites jääb tühik sisse, et ülejärgmise käsu näites ta eemaldada.\n\n\n\n\nnimed&lt;-str_replace(nimed, \"härra\", \"\")\nnimed\n\n [1] \" Luke Skywalker\"     \" C-3PO\"              \" Darth Vader\"       \n [4] \" Owen Lars\"          \" Beru Whitesun Lars\" \" R5-D4\"             \n [7] \" Biggs Darklighter\"  \" Anakin Skywalker\"   \" Shmi Skywalker\"    \n[10] \" Cliegg Lars\"       \n\n\nKõigi nime ette jäi nüüd tühik \" \" ja me tahame temast lahti saada. whitspace1 eemaldamiseks on käsk str_trim() ning selle käsu sees saab täpsutada, kas üleliigne on vaja eemaldada “left”, “right” või “both”.\n\nnimed&lt;-str_trim(nimed, side=\"left\")\nnimed\n\n [1] \"Luke Skywalker\"     \"C-3PO\"              \"Darth Vader\"       \n [4] \"Owen Lars\"          \"Beru Whitesun Lars\" \"R5-D4\"             \n [7] \"Biggs Darklighter\"  \"Anakin Skywalker\"   \"Shmi Skywalker\"    \n[10] \"Cliegg Lars\"       \n\n\n\nnimed\n\n [1] \"Luke Skywalker\"     \"C-3PO\"              \"Darth Vader\"       \n [4] \"Owen Lars\"          \"Beru Whitesun Lars\" \"R5-D4\"             \n [7] \"Biggs Darklighter\"  \"Anakin Skywalker\"   \"Shmi Skywalker\"    \n[10] \"Cliegg Lars\"       \n\n\n\n\nSuur ja väike täht tekstis\nSuure ja väikese tähe muutmiseks on abiks mitmed käsud. Nende kasutamine on mugavalt lihtne ega vaja pikemad kirjeldamist.\n\nstr_to_lower()\nstr_to_upper()\nstr_to_title()\nstr_to_sentence()\n\n\nstr_to_lower(nimed)\n\n [1] \"luke skywalker\"     \"c-3po\"              \"darth vader\"       \n [4] \"owen lars\"          \"beru whitesun lars\" \"r5-d4\"             \n [7] \"biggs darklighter\"  \"anakin skywalker\"   \"shmi skywalker\"    \n[10] \"cliegg lars\"       \n\n\n\nstr_to_upper(nimed)\n\n [1] \"LUKE SKYWALKER\"     \"C-3PO\"              \"DARTH VADER\"       \n [4] \"OWEN LARS\"          \"BERU WHITESUN LARS\" \"R5-D4\"             \n [7] \"BIGGS DARKLIGHTER\"  \"ANAKIN SKYWALKER\"   \"SHMI SKYWALKER\"    \n[10] \"CLIEGG LARS\"       \n\n\n\nstr_to_title(nimed)\n\n [1] \"Luke Skywalker\"     \"C-3po\"              \"Darth Vader\"       \n [4] \"Owen Lars\"          \"Beru Whitesun Lars\" \"R5-D4\"             \n [7] \"Biggs Darklighter\"  \"Anakin Skywalker\"   \"Shmi Skywalker\"    \n[10] \"Cliegg Lars\"       \n\n\n\nstr_to_sentence(nimed)\n\n [1] \"Luke skywalker\"     \"C-3po\"              \"Darth vader\"       \n [4] \"Owen lars\"          \"Beru whitesun lars\" \"R5-d4\"             \n [7] \"Biggs darklighter\"  \"Anakin skywalker\"   \"Shmi skywalker\"    \n[10] \"Cliegg lars\"       \n\n\n\n\nStringi pikkus ja sagedus\nKui pikad (st mitu tähte ja ühikut) on lahtri väärtused saab vaadata käsuga str_length().\n\n\n\n\n\n\nstr_length() käsu abil on mõnikord hea tuvastada whitespace olemasolu.\n\n\n\n\nstr_length(nimed)\n\n [1] 14  5 11  9 18  5 17 16 14 11\n\n\nstr_count() näitab ära esinemissageduse. Näiteks soovime vaadata, mitu korda esineb “Lars” nimedes?\n\nstr_count(nimed, \"Lars\")\n\n [1] 0 0 0 1 1 0 0 0 0 1\n\n\nR kuvab vastuse kõigi vektori väärtuste kohta (vajalik tekstianalüüsis).\nKui soovime vaadata aga, mitu korda esineb stringis ükskõik milline täht (nt täishäälik), tuleb otsitav osa kirjutada omakorda nurksulgude [] sisse.\n\nstr_count(nimed, \"[aeiouõäö]\")\n\n [1] 4 0 3 2 6 0 4 4 3 3\n\n\nKui kasutada str_count() tühjalt ehk ilma ühegi täpsustuseta sulgude sees, annab R vastuseks väärtuse tähemärkide arvu. See on sama, mis kasutada käsku str_lenght().\n\nstr_count(nimed)\n\n [1] 14  5 11  9 18  5 17 16 14 11\n\n\n\n\nStringi eraldamine\nstr_sub() käsuga eraldame string-i eest või tagant kindla pikkuse string-i. Näiteks võtame kõigi tegelaste nimelt esimesed viis tähemärki.\n\nstr_sub(nimed, 1, 5 )\n\n [1] \"Luke \" \"C-3PO\" \"Darth\" \"Owen \" \"Beru \" \"R5-D4\" \"Biggs\" \"Anaki\" \"Shmi \"\n[10] \"Clieg\"\n\n\nVõi täspsutame, et eraldamine algab (start=) alates string-i kolmandast tähemärgist ja eraldamine tuleb lõpetada (end=) kaheksanda märgi juures.\n\nstr_sub(nimed, start = 3, end=8)\n\n [1] \"ke Sky\" \"3PO\"    \"rth Va\" \"en Lar\" \"ru Whi\" \"-D4\"    \"ggs Da\" \"akin S\"\n [9] \"mi Sky\" \"iegg L\"\n\n\n\n\n\n\n\n\nString on string ka siis kui ta sisaldab numbrit ning str_ käsud toimivad ka siis kui tekst sisaldab ainult arve.\n\n\n\nVaatame, kas mõne tegelase nimi sisaldab ükskõik millist numbrit ja eraldame need numbrid nimest käsuga str_extract(). Sel korral tuleb “kuni” ütlemiseks öelda : asemel nagu tavaliselt kirjatekstis kasutame sidekriipsu (-).\n\nstr_extract(starwars$name, \"[0-9]\")\n\n [1] NA  \"3\" \"2\" NA  NA  NA  NA  \"5\" NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA \n[20] NA  NA  \"8\" NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA \n[39] NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA \n[58] NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  \"4\" NA  NA \n[77] NA  NA  NA  NA  NA  NA  NA  NA  NA  \"8\" NA \n\n\n\n\n\n\n\n\nstr_extract() käsu kasutamisel peab teadma, eraldatakse ainult esimene ja mitte kõik numbrid.\n\n\n\nMeil on näiteks selline tegelane andmestikus nagu “IG-88”.\nKui soov on aga teada, mitu korda esineb nimes number (või ükskõik milline otsitav tekst), tuleb kasutada ülalkirjeldatud käsku str_count()\n\nstr_count(starwars$name, \"[0-9]\")\n\n [1] 0 1 2 0 0 0 0 2 0 0 0 0 0 0 0 0 0 0 0 0 0 2 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0\n[39] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 3 0 0\n[77] 0 0 0 0 0 0 0 0 0 1 0\n\n\nTavaliselt soovime neid sõnu ka nähe. Selleks on käsk str_view_all().\n\nstr_view_all(nimed, \"[0-9]\")\n\n [1] │ Luke Skywalker\n [2] │ C-&lt;3&gt;PO\n [3] │ Darth Vader\n [4] │ Owen Lars\n [5] │ Beru Whitesun Lars\n [6] │ R&lt;5&gt;-D&lt;4&gt;\n [7] │ Biggs Darklighter\n [8] │ Anakin Skywalker\n [9] │ Shmi Skywalker\n[10] │ Cliegg Lars\n\n\n\n\n\n\nWickham, Hadley. 2022. Stringr: Simple, Consistent Wrappers for Common String Operations. https://CRAN.R-project.org/package=stringr.\n\n\n———. 2023. Forcats: Tools for Working with Categorical Variables (Factors). https://CRAN.R-project.org/package=forcats.",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Töö teksti sisaldavate tunnustega</span>"
    ]
  },
  {
    "objectID": "04-faktor-string.html#footnotes",
    "href": "04-faktor-string.html#footnotes",
    "title": "4  Töö teksti sisaldavate tunnustega",
    "section": "",
    "text": "whitespace on see, mida me “tavavaates” ei nähe ehk tühikud, tab jms.↩︎",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Töö teksti sisaldavate tunnustega</span>"
    ]
  },
  {
    "objectID": "05-puuduvad-vaartused.html",
    "href": "05-puuduvad-vaartused.html",
    "title": "5  Puuduvad väärtused",
    "section": "",
    "text": "5.1 Miks vaadata puuduvad väärtusi?\nPuuduvaid väärtusi on vaja vaadata eraldi, et teha selgeks, miks puuduv väärtus on puuduv. Võib-olla tahad puuduvat väärtus asendada mõne muu kategooriaga. Nt “teadmata”, “keeldub vastamast”, “ei ole võimalik vastata”, sest puudub osalus jne. Või siis on soov vastupidi keerata mingid kategooriad NA-ks, sest arvutamisel pole vahet, kas “keeldus vastamast” või “ei osanud vastata”.\nPuuduvaid väärtuseid tahame teada, et olla kindel kas puuduvad väärtused on puuduvad juhuslikult või mingi kindla mustri järgi. Mustrit ei näe sellest tunnusest, kus on puuduvad väärtused vaid mõne muu tunnuse pealt. Andmeid saab analüüsida küll, aga neid raporteerides peab ära märkima, miks on puuduvad väärtused ja mis mustriga.",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Puuduvad väärtused</span>"
    ]
  },
  {
    "objectID": "05-puuduvad-vaartused.html#mida-puuduvad",
    "href": "05-puuduvad-vaartused.html#mida-puuduvad",
    "title": "5  Puuduvad väärtused",
    "section": "5.2 Mida teha puuduvate väärtustega?",
    "text": "5.2 Mida teha puuduvate väärtustega?\nPuuduvate väärtustega toimetulek võib tähendada viite lähenemist.\n\nKustutada kõik read, kus on puuduvad väärtused (äärmuslik).\nKustutada need read, kus on puuduv väärtus kindlas tunnuses.\nMuuta puuduva väärtus mingiks kindlaks väärtuseks (nt “teadmata”).\nVastupidi, muuta kindel väärtus hoopis NA ks (näiteks 0, \"-\" või \" \").\nMuuta puuduv väärtus mingiks “best-guess” väärtuseks (nt keskmine). Vaata tunnuste sisu muutmist siit.\n\n\nlibrary(tidyverse)\n\n\ndata(starwars)\n\n\nPuuduvate väärtuste leidmine\nKasutan näiteks uuesti starwars andmestikku, aga jätan sealt välja need tunnused, mis sisaldavad liste.\n\nstarwars&lt;-starwars%&gt;%\n1  select(name:species)\n\n2nrow(starwars)\n\n\n1\n\nvalin tunnused, et eemaldada testandmestikust “list” tüüpi tunnused\n\n2\n\nTuletan meelde, kui palju on andmestikus ridu.\n\n\n\n\n[1] 87\n\n\nSeejärel vaatan andmestiku päist.\n\nstarwars%&gt;%\n  head()\n\n# A tibble: 6 × 11\n  name      height  mass hair_color skin_color eye_color birth_year sex   gender\n  &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; \n1 Luke Sky…    172    77 blond      fair       blue            19   male  mascu…\n2 C-3PO        167    75 &lt;NA&gt;       gold       yellow         112   none  mascu…\n3 R2-D2         96    32 &lt;NA&gt;       white, bl… red             33   none  mascu…\n4 Darth Va…    202   136 none       white      yellow          41.9 male  mascu…\n5 Leia Org…    150    49 brown      light      brown           19   fema… femin…\n6 Owen Lars    178   120 brown, gr… light      blue            52   male  mascu…\n# ℹ 2 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;\n\n\nNäeme, et meie andmestik sisaldab puuduvaid väärtusi. Üks võimalus puuduvatest väärtustest vabanemiseks on kasutada käsku na.omit()\n\nstarwars%&gt;%\n  na.omit()\n\n# A tibble: 29 × 11\n   name     height  mass hair_color skin_color eye_color birth_year sex   gender\n   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; \n 1 Luke Sk…    172    77 blond      fair       blue            19   male  mascu…\n 2 Darth V…    202   136 none       white      yellow          41.9 male  mascu…\n 3 Leia Or…    150    49 brown      light      brown           19   fema… femin…\n 4 Owen La…    178   120 brown, gr… light      blue            52   male  mascu…\n 5 Beru Wh…    165    75 brown      light      blue            47   fema… femin…\n 6 Biggs D…    183    84 black      light      brown           24   male  mascu…\n 7 Obi-Wan…    182    77 auburn, w… fair       blue-gray       57   male  mascu…\n 8 Anakin …    188    84 blond      fair       blue            41.9 male  mascu…\n 9 Chewbac…    228   112 brown      unknown    blue           200   male  mascu…\n10 Han Solo    180    80 brown      fair       brown           29   male  mascu…\n# ℹ 19 more rows\n# ℹ 2 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;\n\n\n\n\n\n\n\n\nKäsu na.omit() kasutamine on õigustatud ainult siis, kui tead täpselt, kus on puuduvad väärtused, miks nad on puuduvad ja kui palju neid on.\n\n\n\nMeid aga huvitab, kus kohas need puuduvad väärtused ja tahame nad välja filtreerida. Abiks on käsk complete.cases(.). Puuduvate väärtuste tuvastamiseks on mõistlikum pöörata käsk tagurpidi ja küsida välja read, mis sisaldavad puuduvaid väärtusi ehk !complete.cases(.)\n\nstarwars%&gt;%\n  filter(!complete.cases(starwars))\n\n# A tibble: 58 × 11\n   name     height  mass hair_color skin_color eye_color birth_year sex   gender\n   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; \n 1 C-3PO       167    75 &lt;NA&gt;       gold       yellow           112 none  mascu…\n 2 R2-D2        96    32 &lt;NA&gt;       white, bl… red               33 none  mascu…\n 3 R5-D4        97    32 &lt;NA&gt;       white, red red               NA none  mascu…\n 4 Wilhuff…    180    NA auburn, g… fair       blue              64 male  mascu…\n 5 Greedo      173    74 &lt;NA&gt;       green      black             44 male  mascu…\n 6 Jabba D…    175  1358 &lt;NA&gt;       green-tan… orange           600 herm… mascu…\n 7 Jek Ton…    180   110 brown      fair       blue              NA &lt;NA&gt;  &lt;NA&gt;  \n 8 Yoda         66    17 white      green      brown            896 male  mascu…\n 9 IG-88       200   140 none       metal      red               15 none  mascu…\n10 Mon Mot…    150    NA auburn     fair       blue              48 fema… femin…\n# ℹ 48 more rows\n# ℹ 2 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;\n\n\nNäiteks näeme, et puuduvad väärtused on ridamisi hair_color tunnuse all.\n\n\nPuuduvate väärtuste vaatamine\nSoovime puuduvad väärtused välja filtreerida, et vaadata neid tegelasi lähemalt, kellel on juuksevärvi info puudu. Käsk is.na() annab TRUE/FALSE vastuse ning on sedasorti filteerimiseks ideaalne.\n\nstarwars%&gt;%\n1  filter(is.na(hair_color))%&gt;%\n  select(name, species, hair_color)\n\n\n1\n\nNäita neid ridu, kus tunnuse väärtus on puudu\n\n\n\n\n# A tibble: 5 × 3\n  name                  species hair_color\n  &lt;chr&gt;                 &lt;chr&gt;   &lt;chr&gt;     \n1 C-3PO                 Droid   &lt;NA&gt;      \n2 R2-D2                 Droid   &lt;NA&gt;      \n3 R5-D4                 Droid   &lt;NA&gt;      \n4 Greedo                Rodian  &lt;NA&gt;      \n5 Jabba Desilijic Tiure Hutt    &lt;NA&gt;      \n\n\n\n\nPuuduvate väärtuste ringikodeerimine\nNüüd selgub, et kõik need, kellel on juuksevärv puudu on tegelased, kellel polegi juukseid. Saame need tegelased alles jätta ja ringi kodeerida.\n\nstarwars$hair_color&lt;-replace_na(starwars$hair_color, \"none\")\n\n\nstarwars%&gt;%\n  select(hair_color)%&gt;%\n  table()\n\nhair_color\n       auburn  auburn, grey auburn, white         black         blond \n            1             1             1            13             3 \n       blonde         brown   brown, grey          grey          none \n            1            18             1             1            43 \n        white \n            4 \n\n\n\n\nVäärtuste märkimine puuduvaks\nNüüd soovin, et hair_color tunnuse grupp “none” oleks andmesitkus NA.\n\n\n\n\n\n\nMõtle hoolega läbi, kas tahad muuta tunnust või mitte. “Pole juukseid” ehk “none” on igal juhul selge info selle kohta, miks juuksevärvi pole andmetes kirjas. NA peaks tähendama ikka seda, et info juuste olemasolu ja värvi kohta täielikult info puudub.\n\n\n\nKasutada saab käsku na_if().\n\nstarwars$hair_color&lt;-na_if(starwars$hair_color, \"none\")\n\n\n\nPuuduvate väärtuste kõrvale jätmine\nNäiteks tahame teha graafikut, kuidas jaguneb tunnus “hair_color”.\n\n\n\n\n\n\nAndmete visuaalse esitamise kohta tuleb eraldi peatükk, mis tutvustab põhjalikumalt paketti ggplot2 (Wickham 2016) kasutamist (mis on ka osa tidyverse pakettidest). Need joonised ei ole “head” joonised. Praegu õpime käsu drop_na() kasutamist.\n\n\n\nVaikimisi paneb R ka puuduvad väärtused pildile.\n\nstarwars%&gt;%\n  ggplot(aes(x=gender, fill=hair_color))+\n  geom_bar()\n\n\n\n\n\n\n\n\nKäsuga drop_na()- saab öelda, mis tunnuse NA väärtused järgmistest sammudest kõrvale jätta ilma, et peaks andmestikust ridu eemaldama hakkama.\n\nstarwars%&gt;%\n1  drop_na(hair_color, gender)%&gt;%\n  ggplot(aes(gender, fill=hair_color))+\n  geom_bar()\n\n\n1\n\nEemaldab tühjad väärtused tunnusest, et neid pildil mitte kuvada.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nWickham, Hadley. 2016. Ggplot2: Elegant Graphics for Data Analysis. Springer-Verlag New York. https://ggplot2.tidyverse.org.",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Puuduvad väärtused</span>"
    ]
  },
  {
    "objectID": "06-andmestike-liitmine.html",
    "href": "06-andmestike-liitmine.html",
    "title": "6  Andmestike ühendamine ja struktuuri muutmine",
    "section": "",
    "text": "6.1 Eeltööd\nNäidiseks teeme starwars andmesitku tükkideks, et see siis teisiti kokku liita.\nAndmestike liitmise harjutamiseks teeme kolm erinevat andmestikku:\nKõigi andmestike sees on tunnus nimi (name).\ninimesed&lt;-starwars%&gt;%\n  filter(species==\"Human\")%&gt;%\n  select(name, homeworld)\ndroidid&lt;-starwars%&gt;%\n  filter(species==\"Droid\")%&gt;%\n  select(name, homeworld, gender)\ntegelaste_mass&lt;-starwars%&gt;%\n  select(name, mass)\ndim(inimesed)\n\n[1] 35  2\n\ndim(droidid)\n\n[1] 6 3\n\ndim(tegelaste_mass)\n\n[1] 87  2\nNäeme, et kõik on erienva suurusega.",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Andmestike ühendamine ja struktuuri muutmine</span>"
    ]
  },
  {
    "objectID": "06-andmestike-liitmine.html#eeltööd",
    "href": "06-andmestike-liitmine.html#eeltööd",
    "title": "6  Andmestike ühendamine ja struktuuri muutmine",
    "section": "",
    "text": "Päriselus me kunagi sellist jaburat tükeldamist ei teeks, et uuesti kokku liita see, mis kõik kenasti koos.\n\n\n\n\n\ninimesed - sisaldab nime ja kodumaailma\ndroidid - sisaldab nime, kodumaailma ja sugu\ntegelaste_mass - sisaldab nime ja mass\n\n\n\n\n\n\n\n\n\n\n\nHea praktika oleks enne andmestike liitmist üle vaadata nende suurus.",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Andmestike ühendamine ja struktuuri muutmine</span>"
    ]
  },
  {
    "objectID": "06-andmestike-liitmine.html#full-join",
    "href": "06-andmestike-liitmine.html#full-join",
    "title": "6  Andmestike ühendamine ja struktuuri muutmine",
    "section": "6.2 Andmestike täielik liitmine",
    "text": "6.2 Andmestike täielik liitmine\nPaneme kokku andmestikud “inimesed” ja “drodid”. Teeme neist ühe andmestiku ja meid ei sega, et droidide kohta on meil üks tulp rohkem (gender) kui inimeste kohta.\nKasutame käsku full_join() ning õige liitmise korral peaks olema alles kõik andmed:\n\nkokku \\(35+6=41\\) rida ja\n3 tulpa (name, homeworld, gender).\n\n\ninimesed_droidid&lt;-full_join(inimesed, droidid)\n\nJoining with `by = join_by(name, homeworld)`\n\nnrow(inimesed_droidid)\n\n[1] 41\n\n\nVaatame kontrolliks päist.\n\nhead(inimesed_droidid)\n\n# A tibble: 6 × 3\n  name               homeworld gender\n  &lt;chr&gt;              &lt;chr&gt;     &lt;chr&gt; \n1 Luke Skywalker     Tatooine  &lt;NA&gt;  \n2 Darth Vader        Tatooine  &lt;NA&gt;  \n3 Leia Organa        Alderaan  &lt;NA&gt;  \n4 Owen Lars          Tatooine  &lt;NA&gt;  \n5 Beru Whitesun Lars Tatooine  &lt;NA&gt;  \n6 Biggs Darklighter  Tatooine  &lt;NA&gt;  \n\n\nNäeme, et R liitis mõlemad andmestikud kokku ja algselt “inimesed” andmestikus puudunud “gender” väli on nüüd olemas, kuid väärtused on tühjad (NA). (Teame, et meil on olemas inimeste gender tunnuse info andmestikus starwars ja liidame need hiljem juurde).\n\nRidada või tulpade lisamine andmestikku\nKui ühe andmestiku read on vaja lisada olemaoleva andmestiku lõppu, siis saab kasutada käsku bind_rows().\n\n\n\n\n\n\nSelline olukord võib tekkida siis, kui olemas näiteks teatud perioodi andmestik. Kuu või aasta lõppedes on vaja lisada äsjalõppenud periood eelmise andmestiku otsa.\n\n\n\nKui sa tead, et kattuvad kõikide ridada andmeväljade nimed, tunnuste tüübid siis kasuta käsku nii.\n\n#bind_rows(vana_andmestik, liidetav_andmestik)\n\nLiidetava andmestiku read lähevad “vana andmestiku” lõppu.\n\n\n\n\n\n\nSarnaselt toimib ka käsk bind_cols(), kuid jäta meelde, et liidevata andmestiku read tõstetakse üle täpselt nende esinemisjärjekorras. Kasulikum võib olla full_join() käsu kasutamine.",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Andmestike ühendamine ja struktuuri muutmine</span>"
    ]
  },
  {
    "objectID": "06-andmestike-liitmine.html#left-join",
    "href": "06-andmestike-liitmine.html#left-join",
    "title": "6  Andmestike ühendamine ja struktuuri muutmine",
    "section": "6.3 Andmestike osaline liitmine",
    "text": "6.3 Andmestike osaline liitmine\nLiidame “inimesed_droidid” andmestikule juurde nende kaalu (“mass”) andmestikust “tegelaste mass”. Me teame, et “tegelaste mass” sisaldab rohkem tegelasi (st ridu), kui “inimesed_droidid” ning me ei taha, et kõik 87 tegelast “inimesed_droidid” andmestikku üle (st juurde) tuleks. Selleks kasutame käsku left_join() ja esimesena nimetame selle andmestiku, millele tunnuseid juurde liidame. Saame valida, kas teeme uue andmestiku või kirjutame olemasoleva üle.\n\n\n\n\n\n\nKui sa ei ole enda oskustes kindel, ära kohe olemasolevat andmestiku liitmisega üle kirjuta.\n\n\n\n\ninimesed_droidid&lt;-left_join(inimesed_droidid, tegelaste_mass)\n\nJoining with `by = join_by(name)`\n\n\nVaikimisi otsib R ise üles, mis võiks olla see tunnus, mis esineb mõlemas andmestikus. Vajaduse korral võib seda teha ka left_join() käsu sees täpsustusega by=.\nKontrollime üle, et ühtegi liigset rida ega tulpa andmestikku tekkinud.\n\ndim(inimesed_droidid)\n\n[1] 41  4\n\n\nVaatame ka päise üle.\n\nhead(inimesed_droidid)\n\n# A tibble: 6 × 4\n  name               homeworld gender  mass\n  &lt;chr&gt;              &lt;chr&gt;     &lt;chr&gt;  &lt;dbl&gt;\n1 Luke Skywalker     Tatooine  &lt;NA&gt;      77\n2 Darth Vader        Tatooine  &lt;NA&gt;     136\n3 Leia Organa        Alderaan  &lt;NA&gt;      49\n4 Owen Lars          Tatooine  &lt;NA&gt;     120\n5 Beru Whitesun Lars Tatooine  &lt;NA&gt;      75\n6 Biggs Darklighter  Tatooine  &lt;NA&gt;      84\n\n\nMeid häirib, et meil on olemas info inimeste “gender” tunnuse kohta andmestikus “starwars” aga mitte meie “inimesed_droidid” andmestikus. Võtame starwars andmest välja liitmiseks vajamineva osa.\n\ninimesed_gender&lt;-starwars%&gt;%\n  filter(species==\"Human\")%&gt;%\n  select(name, gender)\n\nKordan left_join() käsku ja seekord kasutan näites täpsustust by= (kuigi praegu saaks R vaikimisi ka ise aru, mille järgi liita).\n\ninimesed_droidid&lt;-left_join(inimesed_droidid, inimesed_gender,\n1                            by=\"name\")\nhead(inimesed_droidid)\n\n\n1\n\nTäpsutab, millise tunnuse kaudu liita. liidetavaid tunnuseid võib anda mitu ka vektorina. Näiteks by=c(“linn”, “tänav”)\n\n\n\n\n# A tibble: 6 × 5\n  name               homeworld gender.x  mass gender.y \n  &lt;chr&gt;              &lt;chr&gt;     &lt;chr&gt;    &lt;dbl&gt; &lt;chr&gt;    \n1 Luke Skywalker     Tatooine  &lt;NA&gt;        77 masculine\n2 Darth Vader        Tatooine  &lt;NA&gt;       136 masculine\n3 Leia Organa        Alderaan  &lt;NA&gt;        49 feminine \n4 Owen Lars          Tatooine  &lt;NA&gt;       120 masculine\n5 Beru Whitesun Lars Tatooine  &lt;NA&gt;        75 feminine \n6 Biggs Darklighter  Tatooine  &lt;NA&gt;        84 masculine\n\n\nNüüd juhtus nii, et tekkis kaks “gender” tunnust, sest mõlemad andmesitud sisaldasid tunnust “gender”.\n\n\n\n\n\n\nTunnuse nimes “x” näitab, mis oli algses andmestikus tunnus ja “y” liidetavas.\n\n\n\nTunnuse väärituste sisuline ühendamine käib käskuda mutate() ja coalesce() abil. Kasutame seda nii, et kaotame ära üleliigseks muutunud tunnused “gender.x”, “gender.y”.\n\ninimesed_droidid&lt;-inimesed_droidid%&gt;%\n1  mutate(gender=coalesce(gender.x, gender.y))%&gt;%\n2  select(-gender.x, -gender.y)\n\n\n1\n\nMuunda tunnust gender ja koonda tema alla tunnused gender.x ja gender.y väärtused\n\n2\n\nKustuta (üleliigseks muutunud) tunnused\n\n\n\n\n\nhead(inimesed_droidid)\n\n# A tibble: 6 × 4\n  name               homeworld  mass gender   \n  &lt;chr&gt;              &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;    \n1 Luke Skywalker     Tatooine     77 masculine\n2 Darth Vader        Tatooine    136 masculine\n3 Leia Organa        Alderaan     49 feminine \n4 Owen Lars          Tatooine    120 masculine\n5 Beru Whitesun Lars Tatooine     75 feminine \n6 Biggs Darklighter  Tatooine     84 masculine\n\n\n\n\n\n\n\n\nAlati kontrolli üle ka andmestiku mõõtmed.\n\n\n\n\ndim(inimesed_droidid)\n\n[1] 41  4\n\n\nEemaldame üleliigsed andmestikud käsuga rm().\n\nrm(droidid, inimesed, inimesed_gender, tegelaste_mass, inimesed_droidid)",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Andmestike ühendamine ja struktuuri muutmine</span>"
    ]
  },
  {
    "objectID": "06-andmestike-liitmine.html#andmestiku-struktuuri-muutmine",
    "href": "06-andmestike-liitmine.html#andmestiku-struktuuri-muutmine",
    "title": "6  Andmestike ühendamine ja struktuuri muutmine",
    "section": "6.4 Andmestiku struktuuri muutmine",
    "text": "6.4 Andmestiku struktuuri muutmine\nStruktuuri muutmisega puutub kokku siis, kui esitame kokkuvõtteid mingi sagedustabeli või risttabeli kujul.\nSeepärast räägin praegu group_by() ja summarise() käskude kasutamisest lühidalt. Käsu nimedest on aru saada, et andmestik grupeeritakse ringi ja summarise käsuga arvutatakse kokku kui palju ridu esineb sellises grupeeringus (n()).\n\n\n\n\n\n\nKirjeldava statistika peatükk on koostamisel.\n\n\n\n\nstarwars%&gt;%\n  group_by(gender, species)%&gt;%\n  summarise(n=n())\n\n`summarise()` has grouped output by 'gender'. You can override using the\n`.groups` argument.\n\n\n# A tibble: 42 × 3\n# Groups:   gender [3]\n   gender    species        n\n   &lt;chr&gt;     &lt;chr&gt;      &lt;int&gt;\n 1 feminine  Clawdite       1\n 2 feminine  Droid          1\n 3 feminine  Human          9\n 4 feminine  Kaminoan       1\n 5 feminine  Mirialan       2\n 6 feminine  Tholothian     1\n 7 feminine  Togruta        1\n 8 feminine  Twi'lek        1\n 9 masculine Aleena         1\n10 masculine Besalisk       1\n# ℹ 32 more rows\n\n\nVaikimisi esitatakse tähestiku (või faktori leveli) järjekorras (loe faktorite kohta siit).\nMuudame andmestiku laia formaati nii, et uue andmestiku tulpade nimed tulevad tunnusest “gender”. Ridadeks jäävad liigid. Tunnuste väärtuseks jääb arv, mis ütles mitu tegelast seda “gender” ja “species” esindas.\nSelleks lisan olesmolevale koodile juurde pivot_wider() ning täpsustused names_from= ja values_from=.\n\nstarwars%&gt;%\n  group_by(gender, species)%&gt;%\n  summarise(n=n())%&gt;%\n1  pivot_wider(names_from = gender,\n2              values_from = n)\n\n\n1\n\nPööra andmestik nii, et uued nimed tulevad tunnusest “gender” ning\n\n2\n\nuued väärtused tulevad tunnusest n (mis loodi eelmises sammus)\n\n\n\n\n`summarise()` has grouped output by 'gender'. You can override using the\n`.groups` argument.\n\n\n# A tibble: 38 × 4\n   species    feminine masculine  `NA`\n   &lt;chr&gt;         &lt;int&gt;     &lt;int&gt; &lt;int&gt;\n 1 Clawdite          1        NA    NA\n 2 Droid             1         5    NA\n 3 Human             9        26    NA\n 4 Kaminoan          1         1    NA\n 5 Mirialan          2        NA    NA\n 6 Tholothian        1        NA    NA\n 7 Togruta           1        NA    NA\n 8 Twi'lek           1         1    NA\n 9 Aleena           NA         1    NA\n10 Besalisk         NA         1    NA\n# ℹ 28 more rows",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Andmestike ühendamine ja struktuuri muutmine</span>"
    ]
  },
  {
    "objectID": "06-andmestike-liitmine.html#andmestikust-väljavõttete-tegemine",
    "href": "06-andmestike-liitmine.html#andmestikust-väljavõttete-tegemine",
    "title": "6  Andmestike ühendamine ja struktuuri muutmine",
    "section": "6.5 Andmestikust väljavõttete tegemine",
    "text": "6.5 Andmestikust väljavõttete tegemine\nLisaks filter() ja select() käskudele võib tekkida olukord, kus soov on vaja võtta mingi tükk andmestikust, kas juhuslikult või mingist kindlast kohast (aga pole ühtegi tunnust, mille alusel see täpselt välja filtreerida).\nKäsuga slice() saab öelda, millised ridu andmestikust eraldada on vaja. Näiteks võtame read 30 kuni 40.\n\nslice(starwars, 30:40)\n\n# A tibble: 11 × 14\n   name     height  mass hair_color skin_color eye_color birth_year sex   gender\n   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; \n 1 Nien Nu…    160    68 none       grey       black             NA male  mascu…\n 2 Qui-Gon…    193    89 brown      fair       blue              92 male  mascu…\n 3 Nute Gu…    191    90 none       mottled g… red               NA male  mascu…\n 4 Finis V…    170    NA blond      fair       blue              91 male  mascu…\n 5 Padmé A…    185    45 brown      light      brown             46 fema… femin…\n 6 Jar Jar…    196    66 none       orange     orange            52 male  mascu…\n 7 Roos Ta…    224    82 none       grey       orange            NA male  mascu…\n 8 Rugor N…    206    NA none       green      orange            NA male  mascu…\n 9 Ric Olié    183    NA brown      fair       blue              NA male  mascu…\n10 Watto       137    NA black      blue, grey yellow            NA male  mascu…\n11 Sebulba     112    40 none       grey, red  orange            NA male  mascu…\n# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,\n#   vehicles &lt;list&gt;, starships &lt;list&gt;\n\n\nKäsuga sample_n() saab suvalised read.\n\n\n\n\n\n\nSelline olukord võib tulla ette masinõppes, kus on vaja tekitada test ja treeningandmestik. Masinõppe kohta tuleb eraldi peatükk.\n\n\n\n\nsample_n(starwars, 5)\n\n# A tibble: 5 × 14\n  name      height  mass hair_color skin_color eye_color birth_year sex   gender\n  &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; \n1 Jek Tono…    180 110   brown      fair       blue              NA &lt;NA&gt;  &lt;NA&gt;  \n2 R5-D4         97  32   &lt;NA&gt;       white, red red               NA none  mascu…\n3 Ki-Adi-M…    198  82   white      pale       yellow            92 male  mascu…\n4 Dooku        193  80   white      fair       brown            102 male  mascu…\n5 Luminara…    170  56.2 black      yellow     blue              58 fema… femin…\n# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,\n#   vehicles &lt;list&gt;, starships &lt;list&gt;",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Andmestike ühendamine ja struktuuri muutmine</span>"
    ]
  },
  {
    "objectID": "06-andmestike-liitmine.html#andmestiku-ridade-ümberreastamine",
    "href": "06-andmestike-liitmine.html#andmestiku-ridade-ümberreastamine",
    "title": "6  Andmestike ühendamine ja struktuuri muutmine",
    "section": "6.6 Andmestiku ridade ümberreastamine",
    "text": "6.6 Andmestiku ridade ümberreastamine\nKäsuga arrange() on võimalik read ümber sorteerida nagu vaja on. Vaikimisi töötab käsk nii, et reastab tähestiku järjekorras või väiksemast suuremani.\nVõib kasutada käsku desc() või lihtsalt miinusmärki tunnuse ees ja nii reastatakse tunnuse väärtused suuremast väiksemani.\n\n\n\n\n\n\nMiinusmärk tunnuse nime ees ei tähenda iga kord seda, et tunnus reastatakse teistpidi. Näiteks select() käsu puhul jäetakse miinus märgi kasutamisel see tunnus valimata.\n\n\n\n\nstarwars%&gt;%\n  group_by(gender)%&gt;%\n  summarise(n=n())%&gt;%\n1  arrange(-n)\n\n\n1\n\nReasta tunnused n tulba väärtuste järgi suuremast väiksemani\n\n\n\n\n# A tibble: 3 × 2\n  gender        n\n  &lt;chr&gt;     &lt;int&gt;\n1 masculine    66\n2 feminine     17\n3 &lt;NA&gt;          4\n\n\n\n\n\n\nWickham, Hadley, Romain François, Lionel Henry, Kirill Müller, and Davis Vaughan. 2023. Dplyr: A Grammar of Data Manipulation. https://CRAN.R-project.org/package=dplyr.",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Andmestike ühendamine ja struktuuri muutmine</span>"
    ]
  },
  {
    "objectID": "07-kirjeldav-statistika.html",
    "href": "07-kirjeldav-statistika.html",
    "title": "7  Kirjeldav statistika",
    "section": "",
    "text": "7.1 Kirjeldava statistika leidmine\ndata(starwars)\nkäsk summary() annab numbrilise tunnuse puhul sarnase ülevaate, mida sagedasti kirjeldava statistika puhul teada saada soovime. Vaata ka alapeatükki tunnuste sisuga tutvumine, kus on numbriliste tunnuste baaskäsud kirjeldava statistika leidmiseks.\nLisaks on veel rida erinevaid käske, mis teevad töötamise mugavaks ning põhjalikuma ülevaate saamiseks on parem kasutada juba spetsiaalselt kirjeldava statistika saamiseks loodud pakette.\nKvantiilide leidmiseks on käsk quantile(), mille sees tuleb täpsustada mitmendat kvantiili soovime teada.\nquantile(starwars$height, 0.25, na.rm=T)\n\n25% \n167\nStandardhälve leidmiseks on käsk sd() ja dispersiooni jaoks var().\nsd(starwars$height, na.rm=T)\n\n[1] 34.77416\nvar(starwars$height, na.rm=T)\n\n[1] 1209.242",
    "crumbs": [
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Kirjeldav statistika</span>"
    ]
  },
  {
    "objectID": "07-kirjeldav-statistika.html#kirjeldav-stat",
    "href": "07-kirjeldav-statistika.html#kirjeldav-stat",
    "title": "7  Kirjeldav statistika",
    "section": "",
    "text": "Mood leidmine R-is\nR ei anna numbriliste jaoks baaskäsuna mood-i ning selle leidmiseks peab minema ringiga.\n\n\n\n\n\n\nKõige pealt on vaja salvestada väärtuste sageduse jaotus tabelisse käsuga table() ja seejärel tuleb leida väärtuste esinemissagedus käsu sort() abil järjestades nad suuremast väiksemani.\n\n\n\n\n\n\n\n\n\nPane tähele, et käsu sort() sees ei ole kasutatud käsku desc(), vaid täpsustatud decreasing = T.\n\n\n\n\nsort(table(Orange$age), decreasing = T)\n\n\n 118  484  664 1004 1231 1372 1582 \n   5    5    5    5    5    5    5 \n\n\n\n\n\n\n\n\nTulemuste tõlendamisel arvesta võimalusega, et mõnikord andmetes moodi ei olegi.\n\n\n\n\n\nSagedustabelid\nÜhe või kahemõõtmelise sagedustabeli saamiseks piisab käsust table().\n\ntable(starwars$gender)\n\n\n feminine masculine \n       17        66 \n\n\nEnamsti on vaja lisaks andmete jaotusele aru saada ka jagunemise proportsioonidest (osakaaludest). Selleks on mitu erinevat võimalust.\nKäsk prop.table() vajab uuritavaks tunnuseks tabelit ning tabeli võib eelnevalt salvesta eraldi objekti või kasuta kahe käsu kombinatsiooni.\n\n\n\n\n\n\nKäsu table() põhjal toimub ka hii-ruut statistiku arvutamine, et mõnikord “tasub” väiksemate tabelite objektideks salvestamine end ära.\n\n\n\n\nprop.table(table(starwars$gender))\n\n\n feminine masculine \n0.2048193 0.7951807 \n\n\nKahemõõtmeline sagedustabel vajab sulgude sees täpsustust. Esimene tunnus pannakse ridadeks ja teine tunnus veergudeks.\n\ntable(starwars$sex, starwars$gender)\n\n                \n                 feminine masculine\n  female               16         0\n  hermaphroditic        0         1\n  male                  0        60\n  none                  1         5\n\n\nKui on kahemõõtlemine sagedustabel, tuleb täpsustada kas soovitakse rea protsente (lisada sulgudesse nr 1) või tulpade oma (2). Kui ei täpsusta milliseid osakaale soovid, näitab käsk kogu tabeli proportsionaalset jaotust.\n\ntabel&lt;-table(starwars$sex, starwars$gender)\nprop.table(tabel,2)\n\n                \n                   feminine  masculine\n  female         0.94117647 0.00000000\n  hermaphroditic 0.00000000 0.01515152\n  male           0.00000000 0.90909091\n  none           0.05882353 0.07575758\n\n\nKolmemõõtlemine sagedustabeli tegemine käib sama loogika alusel, kuid võib-olla on siin juba mugavam saada tidyverse paketi käskude (group_by() ja summarise()) abil olukorrast parem pilt.\n\nstarwars%&gt;%\n  group_by(gender, sex)%&gt;%\n  summarise(n=n())\n\n`summarise()` has grouped output by 'gender'. You can override using the\n`.groups` argument.\n\n\n# A tibble: 6 × 3\n# Groups:   gender [3]\n  gender    sex                n\n  &lt;chr&gt;     &lt;chr&gt;          &lt;int&gt;\n1 feminine  female            16\n2 feminine  none               1\n3 masculine hermaphroditic     1\n4 masculine male              60\n5 masculine none               5\n6 &lt;NA&gt;      &lt;NA&gt;               4",
    "crumbs": [
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Kirjeldav statistika</span>"
    ]
  },
  {
    "objectID": "07-kirjeldav-statistika.html#kirjeldav-paketid",
    "href": "07-kirjeldav-statistika.html#kirjeldav-paketid",
    "title": "7  Kirjeldav statistika",
    "section": "7.2 Erinevad paketid kirjeldava statistika jaoks",
    "text": "7.2 Erinevad paketid kirjeldava statistika jaoks\n\nPakett sjmics\nKirjeldava statistika puhul huvitab meid rohkem kui lihtsalt gruppide sees sageduse loendamine, sest näha tahame ka suhtelist ja kumulatiivset sagedust. Selleks on parem kasutada paketist sjmisc (Lüdecke 2018) käske käsk frq() ja descr()\n\nlibrary(sjmisc)\n\n\nfrq(starwars$gender)\n\nx &lt;character&gt; \n# total N=87 valid N=83 mean=1.80 sd=0.41\n\nValue     |  N | Raw % | Valid % | Cum. %\n-----------------------------------------\nfeminine  | 17 | 19.54 |   20.48 |  20.48\nmasculine | 66 | 75.86 |   79.52 | 100.00\n&lt;NA&gt;      |  4 |  4.60 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\n\ndescr(starwars$height)\n\n\n## Basic descriptive statistics\n\n var    type label  n NA.prc  mean    sd   se  md trimmed        range iqr\n  dd integer    dd 81    6.9 174.6 34.77 3.86 180  178.48 198 (66-264)  24\n  skew\n -1.09\n\n\nSoovi korral võib kirjutada aga käsu sisse andmestiku nime ja ülejäänud numbrilised tunnused, mille kohta ülevaadet soovime.\n\ndescr(starwars, height, mass)\n\n\n## Basic descriptive statistics\n\n    var    type  label  n NA.prc   mean     sd    se  md trimmed          range\n height integer height 81   6.90 174.60  34.77  3.86 180  178.48   198 (66-264)\n   mass numeric   mass 59  32.18  97.31 169.46 22.06  79   75.44 1343 (15-1358)\n  iqr  skew\n 24.0 -1.09\n 28.9  7.34\n\n\n\nfrq(starwars, sex, gender)\n\nsex &lt;character&gt; \n# total N=87 valid N=83 mean=2.67 sd=0.87\n\nValue          |  N | Raw % | Valid % | Cum. %\n----------------------------------------------\nfemale         | 16 | 18.39 |   19.28 |  19.28\nhermaphroditic |  1 |  1.15 |    1.20 |  20.48\nmale           | 60 | 68.97 |   72.29 |  92.77\nnone           |  6 |  6.90 |    7.23 | 100.00\n&lt;NA&gt;           |  4 |  4.60 |    &lt;NA&gt; |   &lt;NA&gt;\n\ngender &lt;character&gt; \n# total N=87 valid N=83 mean=1.80 sd=0.41\n\nValue     |  N | Raw % | Valid % | Cum. %\n-----------------------------------------\nfeminine  | 17 | 19.54 |   20.48 |  20.48\nmasculine | 66 | 75.86 |   79.52 | 100.00\n&lt;NA&gt;      |  4 |  4.60 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\n\n\nPakett pastecs\nKirjeldava statistika saamiseks on olemas käsk stat.desc() paketist pastecs (Grosjean and Ibanez 2024), mis annab vajadusel kogu andmestiku nubrilistele tunnuste kohta kompaktse ülevaate. Tunnusele “Tree” annab vastusteks NA, sest kuigi tunnus paistab välja nagu sisaldaks numbreid, on need tegelikult faktorid. Vaata tunnuste tüüpide muutmist siit.\n\nclass(Orange$Tree)\n\n[1] \"ordered\" \"factor\" \n\n\n\nlibrary(pastecs)\n\n\ndata(Orange)\n\n\nstat.desc(Orange)\n\n         Tree          age circumference\nnbr.val    NA 3.500000e+01    35.0000000\nnbr.null   NA 0.000000e+00     0.0000000\nnbr.na     NA 0.000000e+00     0.0000000\nmin        NA 1.180000e+02    30.0000000\nmax        NA 1.582000e+03   214.0000000\nrange      NA 1.464000e+03   184.0000000\nsum        NA 3.227500e+04  4055.0000000\nmedian     NA 1.004000e+03   115.0000000\nmean       NA 9.221429e+02   115.8571429\nSE.mean    NA 8.314028e+01     9.7172759\nCI.mean    NA 1.689614e+02    19.7478805\nvar        NA 2.419307e+05  3304.8907563\nstd.dev    NA 4.918645e+02    57.4881793\ncoef.var   NA 5.333930e-01     0.4961988\n\n\nVõimalus on tellida statistika väljatrükk ka ainult konkreetse tunnuse kohta.\n\n\n\n\n\n\nKasuta käsku round(), et muuta väljatrükk inimsilmale sõbralikumaks. Number sulgude sees näitab, mitu komakohta kuvada.\n\n\n\n\nround(stat.desc(starwars$height), 3)\n\n     nbr.val     nbr.null       nbr.na          min          max        range \n      81.000        0.000        6.000       66.000      264.000      198.000 \n         sum       median         mean      SE.mean CI.mean.0.95          var \n   14143.000      180.000      174.605        3.864        7.689     1209.242 \n     std.dev     coef.var \n      34.774        0.199 \n\n\n\n\n\n\nGrosjean, Philippe, and Frederic Ibanez. 2024. Pastecs: Package for Analysis of Space-Time Ecological Series. https://CRAN.R-project.org/package=pastecs.\n\n\nLüdecke, Daniel. 2018. “Sjmisc: Data and Variable Transformation Functions.” Journal of Open Source Software 3 (26): 754. https://doi.org/10.21105/joss.00754.",
    "crumbs": [
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Kirjeldav statistika</span>"
    ]
  },
  {
    "objectID": "08-seosed-tunnustes.html",
    "href": "08-seosed-tunnustes.html",
    "title": "8  Seosed tunnuste vahel",
    "section": "",
    "text": "8.1 Hii-ruut\nHii-ruut leidmisel on mitmeid võimalusi ning taaskord on see maitse asi, millises järjekorras käsud koodis kokku kirjutada. Arvutamine toimub (rist)tabeli pealt.\nVaatame käske table(), summary() ja chisq.test() erinevaid viise.\nHii-ruut väärtuse saab kätte käsuga summary(), kui kirjutada sulgude sisse, millise risttabeli (st table()) põhjal arvutusi on vaja teha. Tabeli võib salvestada eelnevalt eraldi objekti, kuid ei pea seda tegema.\nsummary(table(starwars$gender, starwars$sex))\n\nNumber of cases in table: 83 \nNumber of factors: 2 \nTest for independence of all factors:\n    Chisq = 77.88, df = 3, p-value = 8.729e-17\n    Chi-squared approximation may be incorrect\nTeine võimalus on tellida eraldi chisq.test() käsu abil hii-ruut.\ntable(starwars$sex, starwars$gender)%&gt;%\n  chisq.test()\n\nWarning in chisq.test(.): Chi-squared approximation may be incorrect\n\n\n\n    Pearson's Chi-squared test\n\ndata:  .\nX-squared = 77.883, df = 3, p-value &lt; 2.2e-16",
    "crumbs": [
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Seosed tunnuste vahel</span>"
    ]
  },
  {
    "objectID": "08-seosed-tunnustes.html#hii-ruut",
    "href": "08-seosed-tunnustes.html#hii-ruut",
    "title": "8  Seosed tunnuste vahel",
    "section": "",
    "text": "Ava käsuga ?chisq.test() test dokumentatsioon, et saada paremini aimu käsu tööst.\n\n\n\n\n\n\n\n\n\n\n\n\n\nLisaks arvutuste väljatrükile harjuta lugema end ka teateid, mida R kuvab. Praegu ütleb ta, et tulemus võib olla vale. Põhjus ei ole siis selles, et programm arvutada ei oska, vaid hii-ruut statistik on tundlik kui tabelis on väiksed või puuduvad rühmad.",
    "crumbs": [
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Seosed tunnuste vahel</span>"
    ]
  },
  {
    "objectID": "08-seosed-tunnustes.html#crameri-v",
    "href": "08-seosed-tunnustes.html#crameri-v",
    "title": "8  Seosed tunnuste vahel",
    "section": "8.2 Crameri V",
    "text": "8.2 Crameri V\nCrameri V leidmiseks on käsk CramerV(), mille saab paketist DescTools(Signorell 2024).\nCrameri V väärtus jääb vahemikku 0 kuni 1. Mida lähemale number ühele, seda suurem on seos.\nKui hii-ruut statistiku väärtused ei ole erinevate tabelite suuruse osas omavahel võrreldavad, siis Crameri V on.\n\nlibrary(DescTools)\n\nKäsu kasutamisel tasub kohe sulgudes ära täpsustada, et soov on näha ka usalduspiire (conf.level=).\n\ntable(starwars$sex, starwars$gender)%&gt;%\n  CramerV(, conf.level=0.95)\n\n Cramer V    lwr.ci    upr.ci \n0.9686868 0.7393305 1.0000000 \n\n\nCrameri V väärtus on peaaegu 1, mis näitab et tunnuste sex ja gender on tugevas seoses. Species ja gender omavaheline seos on nõrgem kui sex ja gender.\n\ntable(starwars$gender, starwars$species)%&gt;%\n  CramerV(, conf.level=0.95)\n\n Cramer V    lwr.ci    upr.ci \n0.6081144 0.0000000 0.4207425",
    "crumbs": [
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Seosed tunnuste vahel</span>"
    ]
  },
  {
    "objectID": "08-seosed-tunnustes.html#korrelatsioon",
    "href": "08-seosed-tunnustes.html#korrelatsioon",
    "title": "8  Seosed tunnuste vahel",
    "section": "8.3 Korrelatsioon",
    "text": "8.3 Korrelatsioon\nKahe arvutunnuse vahelist seost vaadatakse Pearsoni korralatsioonikordajaga ning käsk cor() tuleb baasversioonist. Spearmani korrelatsioonikordajat kasutatakse kas kahe arvulise või järjestustunnuse vahel. Käsk cor() on mõlemal juhul sama, kuid täpsustada tuleks arvutusmeetod (vaikimisi on “pearson”, valida saab ka “kendall”).\n\ncor(starwars$height, starwars$mass, \n1    use=\"complete.obs\")\n\n\n1\n\nEemaldab tühjad väärtused. Valida saab ka use=\"everything\".\n\n\n\n\n[1] 0.130859\n\n\nSeos on positiivne ehk mida pikem on tegelane, seda suurem on ka tema mass. Seose tugevus on pehmelt öeldes pigem tagasihoidlik.\nKäsku cor() saab kasutada ka tervele maatriksile (kui see sisaldab numbrilisi väärtusi).\nVõtame kasutusele R-i andmesitku “mtcars”, kus on kokku 11 arvtunnust. Andmestik sisaldab 32 auto kohta infot (kütusekulu, silindrite arv, kaal jne). Loe andmesitku koha rohkem käivitades käsk ?mtcars.\n\ndata(mtcars)\n\n\n\n\n\n\n\nKirjeldusest (ehk ?mtcars vaadates) selgub, et tunnused “vs” ja “am” sisaldavad küll numbreid, kuid tegelikut tähistavad kategooriaid. Eemaldan need, alles jääb 9 tunnust.\n\n\n\n\nmtcars&lt;-mtcars%&gt;%\n  select(-vs, -am)\nhead(mtcars)\n\n                   mpg cyl disp  hp drat    wt  qsec gear carb\nMazda RX4         21.0   6  160 110 3.90 2.620 16.46    4    4\nMazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02    4    4\nDatsun 710        22.8   4  108  93 3.85 2.320 18.61    4    1\nHornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44    3    1\nHornet Sportabout 18.7   8  360 175 3.15 3.440 17.02    3    2\nValiant           18.1   6  225 105 2.76 3.460 20.22    3    1\n\n\nTeeme käsuga cor() korrellatsioonimaatriksi.\n\ncor(mtcars)\n\n            mpg        cyl       disp         hp        drat         wt\nmpg   1.0000000 -0.8521620 -0.8475514 -0.7761684  0.68117191 -0.8676594\ncyl  -0.8521620  1.0000000  0.9020329  0.8324475 -0.69993811  0.7824958\ndisp -0.8475514  0.9020329  1.0000000  0.7909486 -0.71021393  0.8879799\nhp   -0.7761684  0.8324475  0.7909486  1.0000000 -0.44875912  0.6587479\ndrat  0.6811719 -0.6999381 -0.7102139 -0.4487591  1.00000000 -0.7124406\nwt   -0.8676594  0.7824958  0.8879799  0.6587479 -0.71244065  1.0000000\nqsec  0.4186840 -0.5912421 -0.4336979 -0.7082234  0.09120476 -0.1747159\ngear  0.4802848 -0.4926866 -0.5555692 -0.1257043  0.69961013 -0.5832870\ncarb -0.5509251  0.5269883  0.3949769  0.7498125 -0.09078980  0.4276059\n            qsec       gear       carb\nmpg   0.41868403  0.4802848 -0.5509251\ncyl  -0.59124207 -0.4926866  0.5269883\ndisp -0.43369788 -0.5555692  0.3949769\nhp   -0.70822339 -0.1257043  0.7498125\ndrat  0.09120476  0.6996101 -0.0907898\nwt   -0.17471588 -0.5832870  0.4276059\nqsec  1.00000000 -0.2126822 -0.6562492\ngear -0.21268223  1.0000000  0.2740728\ncarb -0.65624923  0.2740728  1.0000000\n\n\n\nKorrelatsioon paketiga corrplot\nKui on soov korrellatsioonimaatriksit kuvada välja, võib abi olla paketistcorrplot(Wei and Simko 2021).\n\nlibrary(corrplot)\n\ncorrplot 0.92 loaded\n\n\n\ncorrplot(cor(mtcars), \n         method=\"number\")\n\n\n\n\n\n\n\n\nNäeme, et väga tugevas seoses on cyl (silindrite arv) ja hp (hobujõud) 0.83. Mida rohkem silindreid, seda võimsam on auto. Tugev negatiivne korrellatsioon on cyl ja mpg (läbisõit miles/gallon ehk kui mitu miili ühe galloniga sõita saab) vahel. Mida rohkem silindreid, seda lühem on auto läbisõit.\n\ncorrplot(cor(mtcars), \n         method=\"circle\",\n1         type=\"lower\")\n\n\n1\n\nVaikimisi on “full”. Saab valida, kas kuvada joonisel alumine või ülemine “kolmnurk” matriksist.\n\n\n\n\n\n\n\n\n\n\n\n\ncorrplot(cor(mtcars), \n         method=\"shade\",\n         type=\"upper\",\n1         col=c(\"black\", \"white\", \"grey\"),\n2         addshade=\"all\",\n3         tl.col=\"black\")\n\n\n1\n\nSaab lisada vektori kujul värvid, mida joonisel kasutada. Kui on soov pöörata must-valgeks (printer-friendly).\n\n2\n\nMuudab ära taustavärvi triibuliseks, saab valida kas “all”, “positive” või “negative” arvud.\n\n3\n\nMuudab teksti värvi\n\n\n\n\n\n\n\n\n\n\n\n\ncorrplot(cor(mtcars), \n         method=\"color\",\n1         order=\"AOE\")\n\n\n1\n\nMuudab maatriksis tunnuste järjekorda\n\n\n\n\n\n\n\n\n\n\n\n\n\nKorrelatsioon paketiga Hmisc\nPaketiga Hmisc(Harrell Jr 2024) tuleb käsk rcorr(), mis vajab töötamiseks maatriksit. Mulle meeldib see pakett, sest lihtsasti saab kätte ka olulisuse tõenäosused.\n\nlibrary(Hmisc)\n\nVäljatrükk kuvab esmalt korrelatsioonikordajad, seejärel vastajate arvud (n=32) ja seejärel olulise tõenäosused. Puuduvad väärtused oskab käsk rcorr() ise eemaldada.\n\nrcorr(as.matrix(mtcars))\n\n       mpg   cyl  disp    hp  drat    wt  qsec  gear  carb\nmpg   1.00 -0.85 -0.85 -0.78  0.68 -0.87  0.42  0.48 -0.55\ncyl  -0.85  1.00  0.90  0.83 -0.70  0.78 -0.59 -0.49  0.53\ndisp -0.85  0.90  1.00  0.79 -0.71  0.89 -0.43 -0.56  0.39\nhp   -0.78  0.83  0.79  1.00 -0.45  0.66 -0.71 -0.13  0.75\ndrat  0.68 -0.70 -0.71 -0.45  1.00 -0.71  0.09  0.70 -0.09\nwt   -0.87  0.78  0.89  0.66 -0.71  1.00 -0.17 -0.58  0.43\nqsec  0.42 -0.59 -0.43 -0.71  0.09 -0.17  1.00 -0.21 -0.66\ngear  0.48 -0.49 -0.56 -0.13  0.70 -0.58 -0.21  1.00  0.27\ncarb -0.55  0.53  0.39  0.75 -0.09  0.43 -0.66  0.27  1.00\n\nn= 32 \n\n\nP\n     mpg    cyl    disp   hp     drat   wt     qsec   gear   carb  \nmpg         0.0000 0.0000 0.0000 0.0000 0.0000 0.0171 0.0054 0.0011\ncyl  0.0000        0.0000 0.0000 0.0000 0.0000 0.0004 0.0042 0.0019\ndisp 0.0000 0.0000        0.0000 0.0000 0.0000 0.0131 0.0010 0.0253\nhp   0.0000 0.0000 0.0000        0.0100 0.0000 0.0000 0.4930 0.0000\ndrat 0.0000 0.0000 0.0000 0.0100        0.0000 0.6196 0.0000 0.6212\nwt   0.0000 0.0000 0.0000 0.0000 0.0000        0.3389 0.0005 0.0146\nqsec 0.0171 0.0004 0.0131 0.0000 0.6196 0.3389        0.2425 0.0000\ngear 0.0054 0.0042 0.0010 0.4930 0.0000 0.0005 0.2425        0.1290\ncarb 0.0011 0.0019 0.0253 0.0000 0.6212 0.0146 0.0000 0.1290       \n\n\nSeda, kas maatrikseid salvestada eraldi objekti või mitte, sõltub muidugi sellest, mida saadud andmetega soov teha on. Kui corrplot paketti alla tõmmata ei taha, siis võib proovida jooniseid teha käsuga heatmap().\n\n1kor_mtcars&lt;-rcorr(as.matrix(mtcars))\n2heatmap(kor_mtcars$r)\n\n\n1\n\nSalvestab korrelatsioonimaatriksi eraldi objekti. Vaata väärtuseid `Environment` keskkonnas. Objekt sisaldab kolme listi (r, n ja P)1\n\n2\n\nJoonistab eraldi käsuga heatmapi kasutades objetki korrelatsioonikordajaid\n\n\n\n\n\n\n\n\n\n\n\nKorrastame joonist ja paneme tunnused sümmeetriliselt jooksma.\n\nheatmap(kor_mtcars$r,\n1        symm=TRUE)\n\n\n1\n\nPani tunnused sümmeetriliselt “jooksma”.",
    "crumbs": [
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Seosed tunnuste vahel</span>"
    ]
  },
  {
    "objectID": "08-seosed-tunnustes.html#korrelatsiooni-esitlemine-pildis",
    "href": "08-seosed-tunnustes.html#korrelatsiooni-esitlemine-pildis",
    "title": "8  Seosed tunnuste vahel",
    "section": "8.4 Korrelatsiooni esitlemine pildis",
    "text": "8.4 Korrelatsiooni esitlemine pildis\n\n\n\n\n\n\nAndmete visualiseerimise kohta tuleb eraldi peatükk.\n\n\n\nParim viis näidata korrelatsiooni on scatterplot joonise tüübiga. Käsk plot() saab enam-vähem ise aru, mida neist tunnustest pildina luua saab. Kui tunnuse tüübid on midagi muud kui numbrid, saab käsuga plot() teist-tüüpi joonise.\n\nplot(mtcars$mpg, mtcars$hp)\n\n\n\n\n\n\n\n\nKäsuga pairs() saab teha korraga mitme tunnuse kohta ühine joonise.\n\nmtcars%&gt;%\n  select(mpg, hp, wt, drat)%&gt;%\n  pairs()\n\n\n\n\n\n\n\n\n\n\n\n\nHarrell Jr, Frank E. 2024. Hmisc: Harrell Miscellaneous. https://CRAN.R-project.org/package=Hmisc.\n\n\nSignorell, Andri. 2024. DescTools: Tools for Descriptive Statistics. https://CRAN.R-project.org/package=DescTools.\n\n\nWei, Taiyun, and Viliam Simko. 2021. R Package ’Corrplot’: Visualization of a Correlation Matrix. https://github.com/taiyun/corrplot.",
    "crumbs": [
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Seosed tunnuste vahel</span>"
    ]
  },
  {
    "objectID": "08-seosed-tunnustes.html#footnotes",
    "href": "08-seosed-tunnustes.html#footnotes",
    "title": "8  Seosed tunnuste vahel",
    "section": "",
    "text": "r= korrelatsioonikordajad, n= vastajate arv, p=olulisuse tõenäosus↩︎",
    "crumbs": [
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Seosed tunnuste vahel</span>"
    ]
  },
  {
    "objectID": "09-keskmiste-vordlus.html",
    "href": "09-keskmiste-vordlus.html",
    "title": "9  Keskmiste võrdlus",
    "section": "",
    "text": "9.1 Eeltööd\nIga analüüs algab tunnustega tutvumisega. Vajadusel vaata peatükke:\nandmed&lt;-read_csv(\"ess10_valitsus.csv\")\nsummary(andmed)\n\n    essround       idno           gndr             hincfel         \n Min.   :10   Min.   :10021   Length:1542        Length:1542       \n 1st Qu.:10   1st Qu.:14462   Class :character   Class :character  \n Median :10   Median :19254   Mode  :character   Mode  :character  \n Mean   :10   Mean   :19073                                        \n 3rd Qu.:10   3rd Qu.:23587                                        \n Max.   :10   Max.   :27919                                        \n                                                                   \n    grdfinc          gvctzpv          cntry          \n Min.   : 0.000   Min.   : 0.000   Length:1542       \n 1st Qu.: 6.000   1st Qu.: 7.000   Class :character  \n Median : 8.000   Median : 9.000   Mode  :character  \n Mean   : 7.533   Mean   : 8.065                     \n 3rd Qu.:10.000   3rd Qu.:10.000                     \n Max.   :10.000   Max.   :10.000                     \n NA's   :9        NA's   :13\nAndmestikus on tunnused “grdfinc” ja “gvctzpv”, millega on mõõdetud inimeste arvamust demokraatiast. Inimestelt küsiti kuivõrd olulised on erinevad aspektid demokraatia jaoks üldiselt. Hinnangud koguti skaalal kümnepallisel skaalal, kus üks tähendas “ei ole demokraatia jaoks üldiselt üldse oluline” ja kümme tähendas “on demokraatia jaoks üldiselt äärmiselt oluline”.\nKui oluline on Teie arvates demokraatia jaoks üldiselt, et:\nAndmestikus on kategoriaalne tunnus “hincfel”, mis annab aimu nende sissetulekute suuruse kohta. Inimestelt küsiti järgmist:\nMilline järgnevatest kirjeldustest vastab Teie arvates kõige paremini Teie leibkonna praegusele sissetulekute tasemele?\nVajadusel loe, kuidas ringi kodeerida faktoreid.\nandmed$hincfel&lt;-factor(andmed$hincfel,\n                         levels=c(\"Very difficult on present income\",\n                                  \"Difficult on present income\",\n                                  \"Coping on present income\",\n                                  \"Living comfortably on present income\"),\n                         ordered = T)\nfct_count(andmed$hincfel)\n\n# A tibble: 4 × 2\n  f                                        n\n  &lt;ord&gt;                                &lt;int&gt;\n1 Very difficult on present income        43\n2 Difficult on present income            193\n3 Coping on present income               917\n4 Living comfortably on present income   389",
    "crumbs": [
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Keskmiste võrdlus</span>"
    ]
  },
  {
    "objectID": "09-keskmiste-vordlus.html#eeltööd",
    "href": "09-keskmiste-vordlus.html#eeltööd",
    "title": "9  Keskmiste võrdlus",
    "section": "",
    "text": "Andmestikust esmase ülevaate saamine\nTehniline töö tunnustega\n\n\n\n\n\n\n“grdfinc” - valitsus kaitseb kõiki kodanikke vaesuse eest;\n“gvctzpv” - valitsus võtab kasutusele meetmeid sissetulekute erinevuste vähendamiseks\n\n\n\n\nElan /elame mugavalt praeguse sissetuleku juures\nSaame hakkama praeguse sissetuleku juures\nPraeguse sissetuleku juures on raske hakkama saada\nPraeguse sissetuleku juures on väga raske hakkama saada\n\n\n\n\n\n\n\nKuigi küsimusi esitati kas eesti või vene keeles, on need kategooriad andmestikus inglise keeles.",
    "crumbs": [
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Keskmiste võrdlus</span>"
    ]
  },
  {
    "objectID": "09-keskmiste-vordlus.html#t-test",
    "href": "09-keskmiste-vordlus.html#t-test",
    "title": "9  Keskmiste võrdlus",
    "section": "9.2 T-test",
    "text": "9.2 T-test\n\n\n\n\n\n\nLugemissoovitus\n\n\n\nRootalu, K. (2014). T-test. K. Rootalu, V. Kalmus, A. Masso, ja T. Vihalemm (toim), Sotsiaalse analüüsi meetodite ja metodoloogia õpibaas. https://samm.ut.ee/t-test/\n\n\nSoovime teada saada, kuidas erinevad meeste ja naiste hinnangud demokraatia osas. Kas arvamused, et demokraatia jaoks on olulised aspektid, et “valitsus kaitseb kõiki kodanikke vaesuse eest” (tunnust “grdfinc”) ja et “valitsus võtab kasutusele meetmeid sissetulekute erinevuste vähendamiseks” (tunnus “gvctzpv”) on meestel ja naistel ühesugused.\nT-test-i eeltööks on vaja vaadata numbrilise tunnuse jaotust, et selgitada välja, kas standardhälve väärtused on kahe grupi puhul sarnased või erinevad. Seda saab teha ka käsuga aggregate(). Tutvume esmalt tunnusega “grdfinc” ning seejärel “gvctzpv”.\n\naggregate(grdfinc ~ gndr, andmed, sd)\n\n   gndr  grdfinc\n1  Mees 2.464564\n2 Naine 2.162381\n\n\n\naggregate(gvctzpv ~ gndr, andmed, sd)\n\n   gndr  gvctzpv\n1  Mees 2.254784\n2 Naine 2.087212\n\n\nMa hindan antud juhul 0.3 suurust vahet sarnaseks ning kasutan t.test() käsu sees var.equal = TRUE.\n\nt.test(andmed$grdfinc~andmed$gndr,\n       alternative = \"two.sided\",\n1       var.equal = TRUE)\n\n\n1\n\nKui standardhälvete erinevus oleks suur, saaks panna TRUE asemel FALSE.\n\n\n\n\n\n    Two Sample t-test\n\ndata:  andmed$grdfinc by andmed$gndr\nt = -4.53, df = 1531, p-value = 6.356e-06\nalternative hypothesis: true difference in means between group Mees and group Naine is not equal to 0\n95 percent confidence interval:\n -0.7676193 -0.3037218\nsample estimates:\n mean in group Mees mean in group Naine \n           7.238026            7.773697 \n\n\nSaame teada, et t-test statistik-u väärtus on -4,53 ning naistega võrreldes on meeste arvates demokraatia jaoks üldiselt veidi vähem oluline, et valitsus kaitseb kõiki kodanikke vaesuse eest (hinnangu keskmine on meestel 7,3 ja naistel 7,8 punkti). Kuigi hinnangute vahe on väike (0,5 punkti), on tegemist statiliselt olulise erinevusega (\\(p\\)-value on üliväike).\n\nPaariviisiline t-test\nt-test ei vaja alati kahte gruppi. Paariviisilist t-testi saab kasutada siis, kui on soov võrrelda nt samade inimeste erinevate tunnuste keskmisi. Kui inimese meelest on demokraatia jaoks oluline, et “valitsus kaitseb kõiki kodanikke vaesuse eest”, siis kas hinnang on sarnane ka selles, et “valitsus võtab kasutusele meetmeid sissetulekute erinevuste vähendamiseks”?\nLisame t.test() käsule täpsustuse, et vaja on teha paariviisiline t-test.\n\nt.test(andmed$grdfinc, andmed$gvctzpv,\n1       paired=TRUE,\n       alternative = \"two.sided\")\n\n\n1\n\nTäpsustus paariviisilise t-testi läbiviimiseks\n\n\n\n\n\n    Paired t-test\n\ndata:  andmed$grdfinc and andmed$gvctzpv\nt = -10.629, df = 1526, p-value &lt; 2.2e-16\nalternative hypothesis: true mean difference is not equal to 0\n95 percent confidence interval:\n -0.6329981 -0.4357642\nsample estimates:\nmean difference \n     -0.5343811 \n\n\nSelgub, et hinnangute keskmiste erinevus on -0,53 punkti (“grdfinc” keskmine on madalam kui “gvctzpv” keskmine).\n\n\n\n\n\n\nKeskmiste erinevus tunnuste vahel tuli välja juba tunnustega tutvumise etapis, kui kasutasin käsku summary(). paariviisiline t-test vaatab lisaks erinevuse olulisust.\n\n\n\nTesti tulemusel selgus, et tegemist on statistiliselt olulise erinevusega. Ehk siis inimesed hindavad demokraatia jaoks üldiselt olulisemaks, et “valitsus võtab kasutusele meetmeid sissetulekute erinevuste vähendamiseks” kui selle, et “valitsus kaitseb kõiki kodanikke vaesuse eest”.",
    "crumbs": [
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Keskmiste võrdlus</span>"
    ]
  },
  {
    "objectID": "09-keskmiste-vordlus.html#anova-dispersioonianalüüs",
    "href": "09-keskmiste-vordlus.html#anova-dispersioonianalüüs",
    "title": "9  Keskmiste võrdlus",
    "section": "9.3 Anova, dispersioonianalüüs",
    "text": "9.3 Anova, dispersioonianalüüs\n\n\n\n\n\n\nLugemissoovitus\n\n\n\nTooding, L.-M. (2014). Dispersioonianalüüs. K. Rootalu, V. Kalmus, A. Masso, ja T. Vihalemm (toim), Sotsiaalse analüüsi meetodite ja metodoloogia õpibaas. https://samm.ut.ee/dispersioonanalyys/\n\n\nMõnikord on võrreldavaid gruppe rohkem kui kaks. Siis on sobilik teha keskmiste võrdluseks dispersioonianalüüs.\nVõib-olla hinnangute erinevus ei sõltugi vastaja soost, vaid sellest, kuidas ta ise oma sissetulekuga toime tuleb (tunnus “hincfel”)? Kas on võimalik, et paremal elujärjel olevad inimesed ei pea demokraatia puhul sugugi sama oluliseks, et valitsus tegeleks sissetulekute erinevuste vähendamisega kui inimesed, kellel on oma sissetulekute juures väga keeruline toime tulla?\nTesti eeltöö tähendab alati tunnustega tutvumist.\n\nandmed%&gt;%\n  drop_na(grdfinc, gvctzpv)%&gt;%\n  group_by(hincfel)%&gt;%\n  summarise(n=n(),\n    vaesuse_kaitse=mean(grdfinc),\n    vasesuse_sd=sd(grdfinc),\n            meetmed_vahendamiseks=mean(gvctzpv),\n    meetmed_sd=sd(gvctzpv))\n\n# A tibble: 4 × 6\n  hincfel          n vaesuse_kaitse vasesuse_sd meetmed_vahendamiseks meetmed_sd\n  &lt;ord&gt;        &lt;int&gt;          &lt;dbl&gt;       &lt;dbl&gt;                 &lt;dbl&gt;      &lt;dbl&gt;\n1 Very diffic…    43           8.12        2.63                  8.47       2.33\n2 Difficult o…   192           7.75        2.40                  8.48       1.93\n3 Coping on p…   906           7.60        2.27                  8.17       2.10\n4 Living comf…   386           7.19        2.32                  7.57       2.34\n\n\n\n\n\n\n\n\nPane tähele, et gruppide suurused on väga erinevad (43 vs 906).\nIdeaalsel juhul kodeeriks grupid ümber enam-vähem sama suureks, kuid praegu R-is töötamise näitamiseks las jääda nii. Lihtsalt pea meeles, et R ei tee sinu tööle kriitikat ja arvutab ikkagi seda, mida tal arvutada lased.\nTehniliselt oleks õigem teha Kurskal-Wallis test.\n\n\n\nInimesed, kellel on oma praeguse sissetuleku juures väga raske hakkama saada (n=43) peavad demokraatia puhul teistest olulisemaks, et valitsus kaitseks kõiki kodanikke vaesuse eest (keskmine=8,12).\noneway.test() käsuga saab teha dispersioonianalüüsi, kus tuleb esmalt öelda sõltuv tunnus (“grdfinc”) ja grupeeriv tunnus (“hincfel”).\n\noneway.test(andmed$grdfinc~andmed$hincfel)\n\n\n    One-way analysis of means (not assuming equal variances)\n\ndata:  andmed$grdfinc and andmed$hincfel\nF = 4.187, num df = 3.00, denom df = 175.34, p-value = 0.006836\n\n\nSaame teada , et sisstulekute hinnangute jaotuse järgi ei ole seisukoht vaesuse kaitse osas ühesugune ( \\(F\\) =4,2 ja \\(p\\)&lt;0,01). Kahjuks gruppide erinevust selle käsuga ei näe. Võimalus oleks kombineerida käske aov() ja seejärel teha post-hoc testi.\n\naov(grdfinc~hincfel, andmed)%&gt;%\n  summary()\n\n              Df Sum Sq Mean Sq F value Pr(&gt;F)   \nhincfel        3     72  23.980   4.495 0.0038 **\nResiduals   1529   8158   5.335                  \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n9 observations deleted due to missingness\n\n\nPost-hoc testi saab teha siin käsuga TukeyHSD()\nTukeyHSD() esitab analüüsitulemused neljas grupis:\n\n“diff” - gruppide keskmine erinevus\n“lwr” - usalduspiiri alumine väärtus\n“upr” - usalduspiiri ülemine väärtus\n“p adj” - olulisuse tõenäosus Tulemuste lugemist tasub alustada viimasest rühmast, kus on näha, etstatitstiline oluline` erinevus on gruppide “Living comfortably on present income” ja “Coping on present income” ning “Living comfortably on present income” ja “Difficult on present income” vahel.\n\n\nTukeyHSD(aov(grdfinc~hincfel, andmed))\n\n  Tukey multiple comparisons of means\n    95% family-wise confidence level\n\nFit: aov(formula = grdfinc ~ hincfel, data = andmed)\n\n$hincfel\n                                                                            diff\nDifficult on present income-Very difficult on present income          -0.3662791\nCoping on present income-Very difficult on present income             -0.5136446\nLiving comfortably on present income-Very difficult on present income -0.9198966\nCoping on present income-Difficult on present income                  -0.1473655\nLiving comfortably on present income-Difficult on present income      -0.5536176\nLiving comfortably on present income-Coping on present income         -0.4062520\n                                                                             lwr\nDifficult on present income-Very difficult on present income          -1.3685265\nCoping on present income-Very difficult on present income             -1.4407020\nLiving comfortably on present income-Very difficult on present income -1.8748241\nCoping on present income-Difficult on present income                  -0.6191067\nLiving comfortably on present income-Difficult on present income      -1.0780132\nLiving comfortably on present income-Coping on present income         -0.7667049\n                                                                              upr\nDifficult on present income-Very difficult on present income           0.63596832\nCoping on present income-Very difficult on present income              0.41341278\nLiving comfortably on present income-Very difficult on present income  0.03503078\nCoping on present income-Difficult on present income                   0.32437566\nLiving comfortably on present income-Difficult on present income      -0.02922198\nLiving comfortably on present income-Coping on present income         -0.04579914\n                                                                          p adj\nDifficult on present income-Very difficult on present income          0.7833365\nCoping on present income-Very difficult on present income             0.4838591\nLiving comfortably on present income-Very difficult on present income 0.0638553\nCoping on present income-Difficult on present income                  0.8528467\nLiving comfortably on present income-Difficult on present income      0.0338346\nLiving comfortably on present income-Coping on present income         0.0198583",
    "crumbs": [
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Keskmiste võrdlus</span>"
    ]
  },
  {
    "objectID": "09-keskmiste-vordlus.html#kruskal-wallis-test",
    "href": "09-keskmiste-vordlus.html#kruskal-wallis-test",
    "title": "9  Keskmiste võrdlus",
    "section": "9.4 Kruskal-Wallis test",
    "text": "9.4 Kruskal-Wallis test\nKruskal-Wallis test võrdleb keskmiste astak-uid ning sobib kasutada olukordades, kus võrreldavad grupid ei ole ühesuurused. Käsk kruskal.test() toimib põhimõttel, et vajab esmalt sõltuvat ja seejärel grupeerivat tunnust. Andmestiku nimi tuleb öelda koma järel.\n\nkruskal.test(grdfinc~hincfel, andmed)\n\n\n    Kruskal-Wallis rank sum test\n\ndata:  grdfinc by hincfel\nKruskal-Wallis chi-squared = 19.13, df = 3, p-value = 0.0002569\n\n\nKruskal-Wallise test näitab, et gruppide vahel on statistiliselt olulised erinevused. Hii-ruut statistik on 19.1 ja \\(p\\)&lt;0,01.\n\nKruskal-Wallis test paketiga PMCMRplus\nPaketiga MPCMPRplus (Pohlert 2023) saab teha Kruskal-Wallis testi (käsk kruskalTest().\n\nlibrary(PMCMRplus)\n\n\n\n\n\n\n\nTest ei õnnestu kui grupeeriv tunnus ei ole faktor. Vaata ka, kuidas tunnuseid ringi kodeerida.\n\n\n\n\nclass(andmed$hincfel)\n\n[1] \"ordered\" \"factor\" \n\n\n\nkruskalTest(grdfinc~hincfel, andmed)\n\nWarning in kruskalTest.default(c(10, 3, 8, 8, 8, 10, 10, 10, 7, 8, 0, 5, : Ties\nare present. Quantiles were corrected for ties.\n\n\n\n    Kruskal-Wallis test\n\ndata:  grdfinc by hincfel\nchi-squared = 19.13, df = 3, p-value = 0.0002569",
    "crumbs": [
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Keskmiste võrdlus</span>"
    ]
  },
  {
    "objectID": "09-keskmiste-vordlus.html#keskmiste-võrdluse-esitlemine-pildis",
    "href": "09-keskmiste-vordlus.html#keskmiste-võrdluse-esitlemine-pildis",
    "title": "9  Keskmiste võrdlus",
    "section": "9.5 Keskmiste võrdluse esitlemine pildis",
    "text": "9.5 Keskmiste võrdluse esitlemine pildis\n\n\n\n\n\n\nAndmete visualiseerimise kohta tuleb eraldi peatükk.\n\n\n\nKeskmiste võrdluse esitlemiseks sobib joonisena karp-diagramm, sest tegemist on sisuliselt ju numbrilise tunnuse esitlemisega.\nBaaskäsk boxplot() ajaks justkui asja ära, kuid antud hetkel ei mahuta kõikide gruppide nimesid joonisele.\n\nboxplot(andmed$grdfinc~andmed$hincfel)\n\n\n\n\n\n\n\n\nKarpdiagrammi miinuseks on see, et gruppide suurusest jääb ekslik mulje nagu need oleks võrdsed.\nÜks võimalus oleks esitleda keskmiste erinevust gruppide vahel nii, et lisada sinna ka vastajaid kujutavad täpikesi. Pilt nüüd kauniks kunstiväärtuseks ei läinud, kuid annab vaatluse all oleva situatsiooni kohta veidi paremini infot edasi.\n\nandmed%&gt;%\n  ggplot(aes(x=hincfel, y=grdfinc))+\n  geom_jitter(alpha=0.4, color=\"lightblue\")+\n  geom_boxplot(alpha=0.4)+\n  ggtitle(\"Hinnangute keskmiste erinevus gruppide vahel\",\"Sinisega on kujutatud vastajate jagunemine igas grupis\")+\n  coord_flip()+\n  ylab(NULL)+\n  xlab(NULL)+\n  theme_bw()\n\n\n\n\n\n\n\n\n\n\n\n\nPohlert, Thorsten. 2023. PMCMRplus: Calculate Pairwise Multiple Comparisons of Mean Rank Sums Extended. https://CRAN.R-project.org/package=PMCMRplus.",
    "crumbs": [
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Keskmiste võrdlus</span>"
    ]
  },
  {
    "objectID": "09-keskmiste-vordlus.html#footnotes",
    "href": "09-keskmiste-vordlus.html#footnotes",
    "title": "9  Keskmiste võrdlus",
    "section": "",
    "text": "Kui soovid sama andmestikuga harjutusi järele teha, lae andmestik nimega “ess10_valitsus.csv” alla siit.↩︎",
    "crumbs": [
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Keskmiste võrdlus</span>"
    ]
  },
  {
    "objectID": "references.html",
    "href": "references.html",
    "title": "Allikad",
    "section": "",
    "text": "Cui, Boxuan. 2024. DataExplorer: Automate Data Exploration and\nTreatment. https://CRAN.R-project.org/package=DataExplorer.\n\n\nGrosjean, Philippe, and Frederic Ibanez. 2024. Pastecs: Package for\nAnalysis of Space-Time Ecological Series. https://CRAN.R-project.org/package=pastecs.\n\n\nHarrell Jr, Frank E. 2024. Hmisc: Harrell Miscellaneous. https://CRAN.R-project.org/package=Hmisc.\n\n\nLüdecke, Daniel. 2018. “Sjmisc: Data and Variable Transformation\nFunctions.” Journal of Open Source Software 3 (26): 754.\nhttps://doi.org/10.21105/joss.00754.\n\n\n———. 2022. Sjlabelled: Labelled Data Utility Functions (Version\n1.2.0). https://doi.org/10.5281/zenodo.1249215.\n\n\nPohlert, Thorsten. 2023. PMCMRplus: Calculate Pairwise Multiple\nComparisons of Mean Rank Sums Extended. https://CRAN.R-project.org/package=PMCMRplus.\n\n\nR Core Team. 2023. Foreign: Read Data Stored by ’Minitab’, ’s’,\n’SAS’, ’SPSS’, ’Stata’, ’Systat’, ’Weka’, ’dBase’, ... https://CRAN.R-project.org/package=foreign.\n\n\nSchauberger, Philipp, and Alexander Walker. 2023. Openxlsx: Read,\nWrite and Edit Xlsx Files. https://CRAN.R-project.org/package=openxlsx.\n\n\nSignorell, Andri. 2024. DescTools: Tools for Descriptive\nStatistics. https://CRAN.R-project.org/package=DescTools.\n\n\nUshey, Kevin, and Hadley Wickham. 2024. Renv: Project\nEnvironments. https://CRAN.R-project.org/package=renv.\n\n\nWei, Taiyun, and Viliam Simko. 2021. R Package ’Corrplot’:\nVisualization of a Correlation Matrix. https://github.com/taiyun/corrplot.\n\n\nWickham, Hadley. 2016. Ggplot2: Elegant Graphics for Data\nAnalysis. Springer-Verlag New York. https://ggplot2.tidyverse.org.\n\n\n———. 2022. Stringr: Simple, Consistent Wrappers for Common String\nOperations. https://CRAN.R-project.org/package=stringr.\n\n\n———. 2023a. Forcats: Tools for Working with Categorical Variables\n(Factors). https://CRAN.R-project.org/package=forcats.\n\n\n———. 2023b. Tidyverse: Easily Install and Load the Tidyverse.\nhttps://CRAN.R-project.org/package=tidyverse.\n\n\nWickham, Hadley, and Jennifer Bryan. 2023. Readxl: Read Excel\nFiles. https://CRAN.R-project.org/package=readxl.\n\n\nWickham, Hadley, Romain François, Lionel Henry, Kirill Müller, and Davis\nVaughan. 2023. Dplyr: A Grammar of Data Manipulation. https://CRAN.R-project.org/package=dplyr.\n\n\nWickham, Hadley, Jim Hester, and Jennifer Bryan. 2023. Readr: Read\nRectangular Text Data. https://CRAN.R-project.org/package=readr.\n\n\nWickham, Hadley, Evan Miller, and Danny Smith. 2023. Haven: Import\nand Export ’SPSS’, ’Stata’ and ’SAS’ Files. https://CRAN.R-project.org/package=haven.",
    "crumbs": [
      "Allikad"
    ]
  }
]